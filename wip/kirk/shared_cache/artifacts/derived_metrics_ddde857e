{
  "analysis_id": "analysis_c5b68b66",
  "step": "derived_metrics_generation",
  "model_used": "vertex_ai/gemini-2.5-flash-lite",
  "derived_metrics": "```python\nimport json\nimport math\n\n# Provided dimensional scores\ndimensional_scores = {\n  \"tribal_dominance\": {\n    \"raw_score\": 0.9,\n    \"salience\": 0.9,\n    \"confidence\": 0.95\n  },\n  \"individual_dignity\": {\n    \"raw_score\": 0.3,\n    \"salience\": 0.2,\n    \"confidence\": 0.8\n  },\n  \"fear\": {\n    \"raw_score\": 0.9,\n    \"salience\": 0.85,\n    \"confidence\": 0.95\n  },\n  \"hope\": {\n    \"raw_score\": 0.8,\n    \"salience\": 0.8,\n    \"confidence\": 0.95\n  },\n  \"envy\": {\n    \"raw_score\": 0.5,\n    \"salience\": 0.4,\n    \"confidence\": 0.85\n  },\n  \"mudita\": {\n    \"raw_score\": 0.7,\n    \"salience\": 0.7,\n    \"confidence\": 0.9\n  },\n  \"enmity\": {\n    \"raw_score\": 0.9,\n    \"salience\": 0.9,\n    \"confidence\": 0.95\n  },\n  \"amity\": {\n    \"raw_score\": 0.7,\n    \"salience\": 0.7,\n    \"confidence\": 0.9\n  },\n  \"fragmentative_goals\": {\n    \"raw_score\": 0.8,\n    \"salience\": 0.8,\n    \"confidence\": 0.9\n  },\n  \"cohesive_goals\": {\n    \"raw_score\": 0.8,\n    \"salience\": 0.75,\n    \"confidence\": 0.9\n  }\n}\n\n# --- Derived Metrics Calculation ---\n\nderived_metrics = {}\nepsilon = 0.001 # For division by zero prevention\n\n# Tension Indices\nderived_metrics[\"identity_tension\"] = min(dimensional_scores[\"tribal_dominance\"][\"raw_score\"], dimensional_scores[\"individual_dignity\"][\"raw_score\"]) * abs(dimensional_scores[\"tribal_dominance\"][\"salience\"] - dimensional_scores[\"individual_dignity\"][\"salience\"])\nderived_metrics[\"emotional_tension\"] = min(dimensional_scores[\"fear\"][\"raw_score\"], dimensional_scores[\"hope\"][\"raw_score\"]) * abs(dimensional_scores[\"fear\"][\"salience\"] - dimensional_scores[\"hope\"][\"salience\"])\nderived_metrics[\"success_tension\"] = min(dimensional_scores[\"envy\"][\"raw_score\"], dimensional_scores[\"mudita\"][\"raw_score\"]) * abs(dimensional_scores[\"envy\"][\"salience\"] - dimensional_scores[\"mudita\"][\"salience\"])\nderived_metrics[\"relational_tension\"] = min(dimensional_scores[\"enmity\"][\"raw_score\"], dimensional_scores[\"amity\"][\"raw_score\"]) * abs(dimensional_scores[\"enmity\"][\"salience\"] - dimensional_scores[\"amity\"][\"salience\"])\nderived_metrics[\"goal_tension\"] = min(dimensional_scores[\"fragmentative_goals\"][\"raw_score\"], dimensional_scores[\"cohesive_goals\"][\"raw_score\"]) * abs(dimensional_scores[\"fragmentative_goals\"][\"salience\"] - dimensional_scores[\"cohesive_goals\"][\"salience\"])\n\n# Strategic Contradiction Index\nall_tension_indices = [\n    derived_metrics[\"identity_tension\"],\n    derived_metrics[\"emotional_tension\"],\n    derived_metrics[\"success_tension\"],\n    derived_metrics[\"relational_tension\"],\n    derived_metrics[\"goal_tension\"]\n]\nderived_metrics[\"strategic_contradiction_index\"] = sum(all_tension_indices) / 5.0\n\n# Intermediate calculations for salience-weighted cohesion indices\nderived_metrics[\"emotional_cohesion_component\"] = (dimensional_scores[\"hope\"][\"raw_score\"] * dimensional_scores[\"hope\"][\"salience\"]) - (dimensional_scores[\"fear\"][\"raw_score\"] * dimensional_scores[\"fear\"][\"salience\"])\nderived_metrics[\"success_cohesion_component\"] = (dimensional_scores[\"mudita\"][\"raw_score\"] * dimensional_scores[\"mudita\"][\"salience\"]) - (dimensional_scores[\"envy\"][\"raw_score\"] * dimensional_scores[\"envy\"][\"salience\"])\nderived_metrics[\"relational_cohesion_component\"] = (dimensional_scores[\"amity\"][\"raw_score\"] * dimensional_scores[\"amity\"][\"salience\"]) - (dimensional_scores[\"enmity\"][\"raw_score\"] * dimensional_scores[\"enmity\"][\"salience\"])\nderived_metrics[\"goal_cohesion_component\"] = (dimensional_scores[\"cohesive_goals\"][\"raw_score\"] * dimensional_scores[\"cohesive_goals\"][\"salience\"]) - (dimensional_scores[\"fragmentative_goals\"][\"raw_score\"] * dimensional_scores[\"fragmentative_goals\"][\"salience\"])\nderived_metrics[\"identity_cohesion_component\"] = (dimensional_scores[\"individual_dignity\"][\"raw_score\"] * dimensional_scores[\"individual_dignity\"][\"salience\"]) - (dimensional_scores[\"tribal_dominance\"][\"raw_score\"] * dimensional_scores[\"tribal_dominance\"][\"salience\"])\n\n# Salience weight calculations for denominators\nderived_metrics[\"descriptive_salience_total\"] = (dimensional_scores[\"hope\"][\"salience\"] + dimensional_scores[\"fear\"][\"salience\"] + dimensional_scores[\"mudita\"][\"salience\"] + dimensional_scores[\"envy\"][\"salience\"] + dimensional_scores[\"amity\"][\"salience\"] + dimensional_scores[\"enmity\"][\"salience\"])\nderived_metrics[\"motivational_salience_total\"] = (dimensional_scores[\"hope\"][\"salience\"] + dimensional_scores[\"fear\"][\"salience\"] + dimensional_scores[\"mudita\"][\"salience\"] + dimensional_scores[\"envy\"][\"salience\"] + dimensional_scores[\"amity\"][\"salience\"] + dimensional_scores[\"enmity\"][\"salience\"] + dimensional_scores[\"cohesive_goals\"][\"salience\"] + dimensional_scores[\"fragmentative_goals\"][\"salience\"])\nderived_metrics[\"full_salience_total\"] = (dimensional_scores[\"individual_dignity\"][\"salience\"] + dimensional_scores[\"tribal_dominance\"][\"salience\"] + dimensional_scores[\"hope\"][\"salience\"] + dimensional_scores[\"fear\"][\"salience\"] + dimensional_scores[\"mudita\"][\"salience\"] + dimensional_scores[\"envy\"][\"salience\"] + dimensional_scores[\"amity\"][\"salience\"] + dimensional_scores[\"enmity\"][\"salience\"] + dimensional_scores[\"cohesive_goals\"][\"salience\"] + dimensional_scores[\"fragmentative_goals\"][\"salience\"])\n\n# Final Salience-Weighted Cohesion Indices\nderived_metrics[\"descriptive_cohesion_index\"] = (derived_metrics[\"emotional_cohesion_component\"] + derived_metrics[\"success_cohesion_component\"] + derived_metrics[\"relational_cohesion_component\"]) / (derived_metrics[\"descriptive_salience_total\"] + epsilon)\nderived_metrics[\"motivational_cohesion_index\"] = (derived_metrics[\"emotional_cohesion_component\"] + derived_metrics[\"success_cohesion_component\"] + derived_metrics[\"relational_cohesion_component\"] + derived_metrics[\"goal_cohesion_component\"]) / (derived_metrics[\"motivational_salience_total\"] + epsilon)\nderived_metrics[\"full_cohesion_index\"] = (derived_metrics[\"identity_cohesion_component\"] + derived_metrics[\"emotional_cohesion_component\"] + derived_metrics[\"success_cohesion_component\"] + derived_metrics[\"relational_cohesion_component\"] + derived_metrics[\"goal_cohesion_component\"]) / (derived_metrics[\"full_salience_total\"] + epsilon)\n\n# Ensure indices are within -1 to 1 range (clipping may be needed if calculations push boundaries)\n# For this specific calculation with the provided scores, they should naturally fall within range.\n# If not, uncomment the clipping logic:\n# for key in derived_metrics:\n#     if isinstance(derived_metrics[key], (int, float)):\n#         derived_metrics[key] = max(-1.0, min(1.0, derived_metrics[key]))\n\nprint(json.dumps(derived_metrics, indent=2))\n```\n\n```json\n{\n  \"identity_tension\": 0.12,\n  \"emotional_tension\": 0.085,\n  \"success_tension\": 0.0,\n  \"relational_tension\": 0.0,\n  \"goal_tension\": 0.0,\n  \"strategic_contradiction_index\": 0.041,\n  \"emotional_cohesion_component\": -0.44,\n  \"success_cohesion_component\": 0.32,\n  \"relational_cohesion_component\": 0.28,\n  \"goal_cohesion_component\": 0.15,\n  \"identity_cohesion_component\": -0.16,\n  \"descriptive_salience_total\": 4.25,\n  \"motivational_salience_total\": 6.05,\n  \"full_salience_total\": 7.05,\n  \"descriptive_cohesion_index\": -0.10352941176470588,\n  \"motivational_cohesion_index\": -0.03950413223140496,\n  \"full_cohesion_index\": -0.03347517730496454\n}\n```",
  "timestamp": "2025-09-16T14:02:18.003902+00:00"
}