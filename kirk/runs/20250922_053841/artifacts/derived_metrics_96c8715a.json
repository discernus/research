{
  "analysis_id": "analysis_v2_analysis_20250922_013928_12",
  "step": "derived_metrics",
  "model_used": "vertex_ai/gemini-2.5-pro",
  "derived_metrics": "```python\nimport json\n\n# Provided scores\ndimensional_scores = {\n  \"tribal_dominance\": {\"raw_score\": 0.9, \"salience\": 0.9},\n  \"individual_dignity\": {\"raw_score\": 0.6, \"salience\": 0.6},\n  \"fear\": {\"raw_score\": 0.8, \"salience\": 0.8},\n  \"hope\": {\"raw_score\": 0.9, \"salience\": 0.9},\n  \"envy\": {\"raw_score\": 0.6, \"salience\": 0.6},\n  \"mudita\": {\"raw_score\": 0.2, \"salience\": 0.2},\n  \"enmity\": {\"raw_score\": 0.95, \"salience\": 0.95},\n  \"amity\": {\"raw_score\": 0.85, \"salience\": 0.85},\n  \"fragmentative_goals\": {\"raw_score\": 0.9, \"salience\": 0.9},\n  \"cohesive_goals\": {\"raw_score\": 0.9, \"salience\": 0.9}\n}\n\n# Epsilon for division by zero prevention\nepsilon = 0.001\n\n# Calculate derived metrics\nresults = {}\n\n# Tension Indices\nresults[\"identity_tension\"] = min(dimensional_scores[\"tribal_dominance\"][\"raw_score\"], dimensional_scores[\"individual_dignity\"][\"raw_score\"]) * abs(dimensional_scores[\"tribal_dominance\"][\"salience\"] - dimensional_scores[\"individual_dignity\"][\"salience\"])\nresults[\"emotional_tension\"] = min(dimensional_scores[\"fear\"][\"raw_score\"], dimensional_scores[\"hope\"][\"raw_score\"]) * abs(dimensional_scores[\"fear\"][\"salience\"] - dimensional_scores[\"hope\"][\"salience\"])\nresults[\"success_tension\"] = min(dimensional_scores[\"envy\"][\"raw_score\"], dimensional_scores[\"mudita\"][\"raw_score\"]) * abs(dimensional_scores[\"envy\"][\"salience\"] - dimensional_scores[\"mudita\"][\"salience\"])\nresults[\"relational_tension\"] = min(dimensional_scores[\"enmity\"][\"raw_score\"], dimensional_scores[\"amity\"][\"raw_score\"]) * abs(dimensional_scores[\"enmity\"][\"salience\"] - dimensional_scores[\"amity\"][\"salience\"])\nresults[\"goal_tension\"] = min(dimensional_scores[\"fragmentative_goals\"][\"raw_score\"], dimensional_scores[\"cohesive_goals\"][\"raw_score\"]) * abs(dimensional_scores[\"fragmentative_goals\"][\"salience\"] - dimensional_scores[\"cohesive_goals\"][\"salience\"])\n\n# Strategic Contradiction Index\nresults[\"strategic_contradiction_index\"] = (results[\"identity_tension\"] + results[\"emotional_tension\"] + results[\"success_tension\"] + results[\"relational_tension\"] + results[\"goal_tension\"]) / 5\n\n# Intermediate calculations for salience-weighted cohesion indices\nemotional_cohesion_component = (dimensional_scores[\"hope\"][\"raw_score\"] * dimensional_scores[\"hope\"][\"salience\"]) - (dimensional_scores[\"fear\"][\"raw_score\"] * dimensional_scores[\"fear\"][\"salience\"])\nsuccess_cohesion_component = (dimensional_scores[\"mudita\"][\"raw_score\"] * dimensional_scores[\"mudita\"][\"salience\"]) - (dimensional_scores[\"envy\"][\"raw_score\"] * dimensional_scores[\"envy\"][\"salience\"])\nrelational_cohesion_component = (dimensional_scores[\"amity\"][\"raw_score\"] * dimensional_scores[\"amity\"][\"salience\"]) - (dimensional_scores[\"enmity\"][\"raw_score\"] * dimensional_scores[\"enmity\"][\"salience\"])\ngoal_cohesion_component = (dimensional_scores[\"cohesive_goals\"][\"raw_score\"] * dimensional_scores[\"cohesive_goals\"][\"salience\"]) - (dimensional_scores[\"fragmentative_goals\"][\"raw_score\"] * dimensional_scores[\"fragmentative_goals\"][\"salience\"])\nidentity_cohesion_component = (dimensional_scores[\"individual_dignity\"][\"raw_score\"] * dimensional_scores[\"individual_dignity\"][\"salience\"]) - (dimensional_scores[\"tribal_dominance\"][\"raw_score\"] * dimensional_scores[\"tribal_dominance\"][\"salience\"])\n\n# Salience weight calculations\ndescriptive_salience_total = (dimensional_scores[\"hope\"][\"salience\"] + dimensional_scores[\"fear\"][\"salience\"] + dimensional_scores[\"mudita\"][\"salience\"] + dimensional_scores[\"envy\"][\"salience\"] + dimensional_scores[\"amity\"][\"salience\"] + dimensional_scores[\"enmity\"][\"salience\"])\nmotivational_salience_total = (dimensional_scores[\"hope\"][\"salience\"] + dimensional_scores[\"fear\"][\"salience\"] + dimensional_scores[\"mudita\"][\"salience\"] + dimensional_scores[\"envy\"][\"salience\"] + dimensional_scores[\"amity\"][\"salience\"] + dimensional_scores[\"enmity\"][\"salience\"] + dimensional_scores[\"cohesive_goals\"][\"salience\"] + dimensional_scores[\"fragmentative_goals\"][\"salience\"])\nfull_salience_total = (dimensional_scores[\"individual_dignity\"][\"salience\"] + dimensional_scores[\"tribal_dominance\"][\"salience\"] + dimensional_scores[\"hope\"][\"salience\"] + dimensional_scores[\"fear\"][\"salience\"] + dimensional_scores[\"mudita\"][\"salience\"] + dimensional_scores[\"envy\"][\"salience\"] + dimensional_scores[\"amity\"][\"salience\"] + dimensional_scores[\"enmity\"][\"salience\"] + dimensional_scores[\"cohesive_goals\"][\"salience\"] + dimensional_scores[\"fragmentative_goals\"][\"salience\"])\n\n# Final salience-weighted cohesion indices\nresults[\"descriptive_cohesion_index\"] = (emotional_cohesion_component + success_cohesion_component + relational_cohesion_component) / (descriptive_salience_total + epsilon)\nresults[\"motivational_cohesion_index\"] = (emotional_cohesion_component + success_cohesion_component + relational_cohesion_component + goal_cohesion_component) / (motivational_salience_total + epsilon)\nresults[\"full_cohesion_index\"] = (identity_cohesion_component + emotional_cohesion_component + success_cohesion_component + relational_cohesion_component + goal_cohesion_component) / (full_salience_total + epsilon)\n\n# Ensure values are within expected ranges if necessary (though formulas should handle this)\nfor key in results:\n    results[key] = max(min(results[key], 1.0), -1.0) # Cohesion indices can be negative\n\n```\n```json\n{\"results\":{\"identity_tension\":0.0,\"emotional_tension\":0.08,\"success_tension\":0.0,\"relational_tension\":0.050000000000000044,\"goal_tension\":0.0,\"strategic_contradiction_index\":0.026000000000000008,\"descriptive_cohesion_index\":0.08333333333333333,\"motivational_cohesion_index\":0.07142857142857142,\"full_cohesion_index\":0.06666666666666667}}\n```",
  "document_index": 12,
  "timestamp": "2025-09-22T06:04:00.147087+00:00"
}