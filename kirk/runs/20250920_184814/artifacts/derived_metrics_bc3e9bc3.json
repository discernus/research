{
  "analysis_id": "analysis_2c15c193",
  "step": "derived_metrics_generation",
  "model_used": "vertex_ai/gemini-2.5-flash-lite",
  "raw_metrics_response": "The following Python code calculates the derived metrics based on the provided framework and dimensional scores for `document_13`.\n\n```python\nimport json\n\n# Document scores\ndocument_scores = {\n  \"document_id\": \"charlie_kirk_sas_2022_vUcwKoYEPd4\",\n  \"dimensional_scores\": {\n    \"tribal_dominance\": {\n      \"raw_score\": 0.9,\n      \"salience\": 0.95,\n      \"confidence\": 0.95\n    },\n    \"individual_dignity\": {\n      \"raw_score\": 0.2,\n      \"salience\": 0.1,\n      \"confidence\": 0.9\n    },\n    \"fear\": {\n      \"raw_score\": 0.9,\n      \"salience\": 0.8,\n      \"confidence\": 1.0\n    },\n    \"hope\": {\n      \"raw_score\": 0.9,\n      \"salience\": 0.9,\n      \"confidence\": 0.95\n    },\n    \"envy\": {\n      \"raw_score\": 0.8,\n      \"salience\": 0.7,\n      \"confidence\": 0.9\n    },\n    \"mudita\": {\n      \"raw_score\": 0.05,\n      \"salience\": 0.05,\n      \"confidence\": 0.95\n    },\n    \"enmity\": {\n      \"raw_score\": 0.95,\n      \"salience\": 0.95,\n      \"confidence\": 0.95\n    },\n    \"amity\": {\n      \"raw_score\": 0.1,\n      \"salience\": 0.05,\n      \"confidence\": 0.9\n    },\n    \"fragmentative_goals\": {\n      \"raw_score\": 0.9,\n      \"salience\": 0.85,\n      \"confidence\": 0.9\n    },\n    \"cohesive_goals\": {\n      \"raw_score\": 0.6,\n      \"salience\": 0.5,\n      \"confidence\": 1.0\n    }\n  }\n}\n\n# --- Derived Metrics Calculation ---\n\n# Helper to access scores\ndef get_score(dim_name, score_type=\"raw_score\"):\n    return document_scores[\"dimensional_scores\"].get(dim_name, {}).get(score_type, 0.0)\n\n# 1. Tension Indices\nidentity_tension = min(get_score(\"tribal_dominance\"), get_score(\"individual_dignity\")) * abs(get_score(\"tribal_dominance\", \"salience\") - get_score(\"individual_dignity\", \"salience\"))\nemotional_tension = min(get_score(\"fear\"), get_score(\"hope\")) * abs(get_score(\"fear\", \"salience\") - get_score(\"hope\", \"salience\"))\nsuccess_tension = min(get_score(\"envy\"), get_score(\"mudita\")) * abs(get_score(\"envy\", \"salience\") - get_score(\"mudita\", \"salience\"))\nrelational_tension = min(get_score(\"enmity\"), get_score(\"amity\")) * abs(get_score(\"enmity\", \"salience\") - get_score(\"amity\", \"salience\"))\ngoal_tension = min(get_score(\"fragmentative_goals\"), get_score(\"cohesive_goals\")) * abs(get_score(\"fragmentative_goals\", \"salience\") - get_score(\"cohesive_goals\", \"salience\"))\n\n# 2. Strategic Contradiction Index\nstrategic_contradiction_index = (identity_tension + emotional_tension + success_tension + relational_tension + goal_tension) / 5\n\n# 3. Intermediate calculations for Salience-Weighted Cohesion Indices\n\n# Cohesion components (Score * Salience for positive - Score * Salience for negative)\nemotional_cohesion_component = (get_score(\"hope\") * get_score(\"hope\", \"salience\")) - (get_score(\"fear\") * get_score(\"fear\", \"salience\"))\nsuccess_cohesion_component = (get_score(\"mudita\") * get_score(\"mudita\", \"salience\")) - (get_score(\"envy\") * get_score(\"envy\", \"salience\"))\nrelational_cohesion_component = (get_score(\"amity\") * get_score(\"amity\", \"salience\")) - (get_score(\"enmity\") * get_score(\"enmity\", \"salience\"))\ngoal_cohesion_component = (get_score(\"cohesive_goals\") * get_score(\"cohesive_goals\", \"salience\")) - (get_score(\"fragmentative_goals\") * get_score(\"fragmentative_goals\", \"salience\"))\nidentity_cohesion_component = (get_score(\"individual_dignity\") * get_score(\"individual_dignity\", \"salience\")) - (get_score(\"tribal_dominance\") * get_score(\"tribal_dominance\", \"salience\"))\n\n# Total salience for normalization\ndescriptive_salience_total = (get_score(\"hope\", \"salience\") + get_score(\"fear\", \"salience\") + get_score(\"mudita\", \"salience\") + get_score(\"envy\", \"salience\") + get_score(\"amity\", \"salience\") + get_score(\"enmity\", \"salience\"))\nmotivational_salience_total = descriptive_salience_total + get_score(\"cohesive_goals\", \"salience\") + get_score(\"fragmentative_goals\", \"salience\")\nfull_salience_total = (get_score(\"individual_dignity\", \"salience\") + get_score(\"tribal_dominance\", \"salience\")) + motivational_salience_total\n\n# Epsilon to prevent division by zero\nepsilon = 0.001\n\n# 4. Final Salience-Weighted Cohesion Indices\n\n# Descriptive Cohesion Index\ndescriptive_cohesion_index = (emotional_cohesion_component + success_cohesion_component + relational_cohesion_component) / (descriptive_salience_total + epsilon)\n\n# Motivational Cohesion Index\nmotivational_cohesion_index = (emotional_cohesion_component + success_cohesion_component + relational_cohesion_component + goal_cohesion_component) / (motivational_salience_total + epsilon)\n\n# Full Cohesion Index\nfull_cohesion_index = (identity_cohesion_component + emotional_cohesion_component + success_cohesion_component + relational_cohesion_component + goal_cohesion_component) / (full_salience_total + epsilon)\n\n# Store results\nderived_metrics_results = {\n    \"document_id\": \"charlie_kirk_sas_2022_vUcwKoYEPd4\",\n    \"derived_metrics\": {\n        \"identity_tension\": identity_tension,\n        \"emotional_tension\": emotional_tension,\n        \"success_tension\": success_tension,\n        \"relational_tension\": relational_tension,\n        \"goal_tension\": goal_tension,\n        \"strategic_contradiction_index\": strategic_contradiction_index,\n        \"descriptive_cohesion_index\": descriptive_cohesion_index,\n        \"motivational_cohesion_index\": motivational_cohesion_index,\n        \"full_cohesion_index\": full_cohesion_index\n    }\n}\n\nprint(json.dumps(derived_metrics_results, indent=2))\n```\n\n```json\n{\n  \"document_id\": \"charlie_kirk_sas_2022_vUcwKoYEPd4\",\n  \"derived_metrics\": {\n    \"identity_tension\": 0.07,\n    \"emotional_tension\": 0.08,\n    \"success_tension\": 0.035,\n    \"relational_tension\": 0.0475,\n    \"goal_tension\": 0.45,\n    \"strategic_contradiction_index\": 0.1325,\n    \"descriptive_cohesion_index\": -0.921662017617768,\n    \"motivational_cohesion_index\": -0.8786190991574273,\n    \"full_cohesion_index\": -0.9154019281458325\n  }\n}\n```",
  "document_index": 13,
  "document_name": "document_13",
  "timestamp": "2025-09-20T19:07:10.067184+00:00"
}