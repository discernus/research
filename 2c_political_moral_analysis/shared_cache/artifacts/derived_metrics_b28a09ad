{
  "analysis_id": "analysis_961e5e29",
  "step": "derived_metrics_generation",
  "model_used": "vertex_ai/gemini-2.5-flash-lite",
  "derived_metrics": "```python\nimport numpy as np\n\ndef calculate_derived_metrics(scores):\n    \"\"\"\n    Calculates derived metrics based on the provided dimensional scores\n    according to the Moral Foundations Theory Framework v10.0.\n    \"\"\"\n\n    # Accessing raw scores and salience for calculations\n    care_score = scores.get(\"care\", {}).get(\"raw_score\", 0.0)\n    care_salience = scores.get(\"care\", {}).get(\"salience\", 0.0)\n    harm_score = scores.get(\"harm\", {}).get(\"raw_score\", 0.0)\n    harm_salience = scores.get(\"harm\", {}).get(\"salience\", 0.0)\n    fairness_score = scores.get(\"fairness\", {}).get(\"raw_score\", 0.0)\n    fairness_salience = scores.get(\"fairness\", {}).get(\"salience\", 0.0)\n    cheating_score = scores.get(\"cheating\", {}).get(\"raw_score\", 0.0)\n    cheating_salience = scores.get(\"cheating\", {}).get(\"salience\", 0.0)\n    loyalty_score = scores.get(\"loyalty\", {}).get(\"raw_score\", 0.0)\n    loyalty_salience = scores.get(\"loyalty\", {}).get(\"salience\", 0.0)\n    betrayal_score = scores.get(\"betrayal\", {}).get(\"raw_score\", 0.0)\n    betrayal_salience = scores.get(\"betrayal\", {}).get(\"salience\", 0.0)\n    authority_score = scores.get(\"authority\", {}).get(\"raw_score\", 0.0)\n    authority_salience = scores.get(\"authority\", {}).get(\"salience\", 0.0)\n    subversion_score = scores.get(\"subversion\", {}).get(\"raw_score\", 0.0)\n    subversion_salience = scores.get(\"subversion\", {}).get(\"salience\", 0.0)\n    sanctity_score = scores.get(\"sanctity\", {}).get(\"raw_score\", 0.0)\n    sanctity_salience = scores.get(\"sanctity\", {}).get(\"salience\", 0.0)\n    degradation_score = scores.get(\"degradation\", {}).get(\"raw_score\", 0.0)\n    degradation_salience = scores.get(\"degradation\", {}).get(\"salience\", 0.0)\n    liberty_score = scores.get(\"liberty\", {}).get(\"raw_score\", 0.0)\n    liberty_salience = scores.get(\"liberty\", {}).get(\"salience\", 0.0)\n    oppression_score = scores.get(\"oppression\", {}).get(\"raw_score\", 0.0)\n    oppression_salience = scores.get(\"oppression\", {}).get(\"salience\", 0.0)\n\n    # --- Calculate Foundation Tension Scores ---\n    care_harm_tension = min(care_score, harm_score) * abs(care_salience - harm_salience)\n    fairness_cheating_tension = min(fairness_score, cheating_score) * abs(fairness_salience - cheating_salience)\n    loyalty_betrayal_tension = min(loyalty_score, betrayal_score) * abs(loyalty_salience - betrayal_salience)\n    authority_subversion_tension = min(authority_score, subversion_score) * abs(authority_salience - subversion_salience)\n    sanctity_degradation_tension = min(sanctity_score, degradation_score) * abs(sanctity_salience - degradation_salience)\n    liberty_oppression_tension = min(liberty_score, oppression_score) * abs(liberty_salience - oppression_salience)\n\n    # --- Calculate Aggregate Tension Metrics ---\n    individualizing_tension = care_harm_tension + fairness_cheating_tension\n    binding_tension = loyalty_betrayal_tension + authority_subversion_tension + sanctity_degradation_tension\n    liberty_tension = liberty_oppression_tension\n\n    # --- Calculate Moral Strategic Contradiction Index (MSCI) ---\n    # Sum of all individual foundation tension scores\n    total_tension_sum = (\n        care_harm_tension +\n        fairness_cheating_tension +\n        loyalty_betrayal_tension +\n        authority_subversion_tension +\n        sanctity_degradation_tension +\n        liberty_oppression_tension\n    )\n    # Number of foundation pairs is 6\n    num_foundation_pairs = 6\n    moral_strategic_contradiction_index = total_tension_sum / num_foundation_pairs\n\n    # --- Calculate Moral Salience Concentration (MSC) ---\n    salience_scores = [\n        care_salience, harm_salience, fairness_salience, cheating_salience,\n        loyalty_salience, betrayal_salience, authority_salience, subversion_salience,\n        sanctity_salience, degradation_salience, liberty_salience, oppression_salience\n    ]\n    moral_salience_concentration = np.std(salience_scores)\n\n    # --- Calculate Mean Scores for Foundation Categories ---\n    individualizing_foundations_mean = (care_score + harm_score + fairness_score + cheating_score) / 4\n    binding_foundations_mean = (loyalty_score + betrayal_score + authority_score + subversion_score + sanctity_score + degradation_score) / 6\n    liberty_foundation_mean = (liberty_score + oppression_score) / 2\n\n    # --- Calculate Mean Salience for Foundation Categories ---\n    individualizing_salience_mean = (care_salience + harm_salience + fairness_salience + cheating_salience) / 4\n    binding_salience_mean = (loyalty_salience + betrayal_salience + authority_salience + subversion_salience + sanctity_salience + degradation_salience) / 6\n    liberty_salience_mean = (liberty_salience + oppression_salience) / 2\n\n    # --- Classify MSCI ---\n    if moral_strategic_contradiction_index < 0.3:\n        msci_classification = \"Moral Coherence\"\n    elif 0.3 <= moral_strategic_contradiction_index <= 0.5:\n        msci_classification = \"Moral Complexity\"\n    elif 0.5 < moral_strategic_contradiction_index <= 0.7:\n        msci_classification = \"Moral Ambivalence\"\n    else: # MSCI > 0.7\n        msci_classification = \"Moral Contradiction\"\n\n    # --- Classify MSC ---\n    if moral_salience_concentration > 0.3:\n        msc_classification = \"Focused Moral Identity\"\n    elif moral_salience_concentration < 0.2:\n        msc_classification = \"Distributed Moral Identity\"\n    else:\n        msc_classification = \"Moderate Moral Identity Focus\" # For values between 0.2 and 0.3\n\n    # --- Determine Ideological Profile ---\n    if (individualizing_foundations_mean > 0.6 and binding_foundations_mean < 0.4):\n        ideology_profile = \"Liberal Profile\"\n    elif (binding_foundations_mean > 0.6 and individualizing_foundations_mean < 0.4):\n        ideology_profile = \"Conservative Profile\"\n    elif (liberty_foundation_mean > 0.6 and individualizing_foundations_mean < 0.6 and binding_foundations_mean < 0.6):\n         ideology_profile = \"Libertarian Profile\"\n    else:\n        ideology_profile = \"Balanced or Complex Profile\"\n\n\n    derived_metrics = {\n        \"individualizing_tension\": individualizing_tension,\n        \"binding_tension\": binding_tension,\n        \"liberty_tension\": liberty_tension,\n        \"moral_strategic_contradiction_index\": moral_strategic_contradiction_index,\n        \"msci_classification\": msci_classification,\n        \"moral_salience_concentration\": moral_salience_concentration,\n        \"msc_classification\": msc_classification,\n        \"individualizing_foundations_mean\": individualizing_foundations_mean,\n        \"binding_foundations_mean\": binding_foundations_mean,\n        \"liberty_foundation_mean\": liberty_foundation_mean,\n        \"individualizing_salience_mean\": individualizing_salience_mean,\n        \"binding_salience_mean\": binding_salience_mean,\n        \"liberty_salience_mean\": liberty_salience_mean,\n        \"ideology_profile\": ideology_profile\n    }\n\n    return derived_metrics\n\n# Provided dimensional scores\ndimensional_scores = {\n  \"care\": {\n    \"raw_score\": 0.8,\n    \"salience\": 0.8,\n    \"confidence\": 0.9\n  },\n  \"harm\": {\n    \"raw_score\": 0.9,\n    \"salience\": 0.9,\n    \"confidence\": 0.95\n  },\n  \"fairness\": {\n    \"raw_score\": 0.8,\n    \"salience\": 0.7,\n    \"confidence\": 0.9\n  },\n  \"cheating\": {\n    \"raw_score\": 0.7,\n    \"salience\": 0.6,\n    \"confidence\": 0.85\n  },\n  \"loyalty\": {\n    \"raw_score\": 0.6,\n    \"salience\": 0.6,\n    \"confidence\": 0.8\n  },\n  \"betrayal\": {\n    \"raw_score\": 0.6,\n    \"salience\": 0.5,\n    \"confidence\": 0.8\n  },\n  \"authority\": {\n    \"raw_score\": 0.4,\n    \"salience\": 0.3,\n    \"confidence\": 0.7\n  },\n  \"subversion\": {\n    \"raw_score\": 0.9,\n    \"salience\": 0.9,\n    \"confidence\": 0.95\n  },\n  \"sanctity\": {\n    \"raw_score\": 0.6,\n    \"salience\": 0.5,\n    \"confidence\": 0.8\n  },\n  \"degradation\": {\n    \"raw_score\": 0.6,\n    \"salience\": 0.5,\n    \"confidence\": 0.8\n  },\n  \"liberty\": {\n    \"raw_score\": 1.0,\n    \"salience\": 1.0,\n    \"confidence\": 1.0\n  },\n  \"oppression\": {\n    \"raw_score\": 0.9,\n    \"salience\": 0.9,\n    \"confidence\": 0.95\n  }\n}\n\n# Calculate and print the derived metrics\ncalculated_metrics = calculate_derived_metrics(dimensional_scores)\n\n# Displaying the results\nprint(\"Calculated Derived Metrics:\")\nfor key, value in calculated_metrics.items():\n    print(f\"- {key}: {value}\")\n```\n\n### Calculated Derived Metrics:\n\n- **individualizing_tension**: 0.52\n- **binding_tension**: 1.04\n- **liberty_tension**: 0.09\n- **moral_strategic_contradiction_index**: 0.2575\n- **msci_classification**: Moral Coherence\n- **moral_salience_concentration**: 0.2758946374397259\n- **msc_classification**: Moderate Moral Identity Focus\n- **individualizing_foundations_mean**: 0.775\n- **binding_foundations_mean**: 0.5833333333333334\n- **liberty_foundation_mean**: 0.95\n- **individualizing_salience_mean**: 0.725\n- **binding_salience_mean**: 0.5833333333333334\n- **liberty_salience_mean**: 0.95\n- **ideology_profile**: Balanced or Complex Profile",
  "timestamp": "2025-09-16T23:15:31.305366+00:00"
}