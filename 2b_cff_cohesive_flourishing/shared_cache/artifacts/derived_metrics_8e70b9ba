{
  "analysis_id": "analysis_40a0e58b",
  "step": "derived_metrics_generation",
  "model_used": "vertex_ai/gemini-2.5-flash-lite",
  "derived_metrics": "```python\nimport json\nimport math\n\ndef calculate_derived_metrics(scores_data):\n    \"\"\"\n    Calculates derived metrics based on the provided dimensional scores\n    according to the Cohesive Flourishing Framework v10.0.\n    \"\"\"\n    dimensional_scores = scores_data[\"dimensional_scores\"]\n\n    # --- Tension Indices ---\n    identity_tension = min(dimensional_scores[\"tribal_dominance\"][\"raw_score\"], dimensional_scores[\"individual_dignity\"][\"raw_score\"]) * abs(dimensional_scores[\"tribal_dominance\"][\"salience\"] - dimensional_scores[\"individual_dignity\"][\"salience\"])\n    emotional_tension = min(dimensional_scores[\"fear\"][\"raw_score\"], dimensional_scores[\"hope\"][\"raw_score\"]) * abs(dimensional_scores[\"fear\"][\"salience\"] - dimensional_scores[\"hope\"][\"salience\"])\n    success_tension = min(dimensional_scores[\"envy\"][\"raw_score\"], dimensional_scores[\"compersion\"][\"raw_score\"]) * abs(dimensional_scores[\"envy\"][\"salience\"] - dimensional_scores[\"compersion\"][\"salience\"])\n    relational_tension = min(dimensional_scores[\"enmity\"][\"raw_score\"], dimensional_scores[\"amity\"][\"raw_score\"]) * abs(dimensional_scores[\"enmity\"][\"salience\"] - dimensional_scores[\"amity\"][\"salience\"])\n    goal_tension = min(dimensional_scores[\"fragmentative_goals\"][\"raw_score\"], dimensional_scores[\"cohesive_goals\"][\"raw_score\"]) * abs(dimensional_scores[\"fragmentative_goals\"][\"salience\"] - dimensional_scores[\"cohesive_goals\"][\"salience\"])\n\n    # --- Strategic Contradiction Index ---\n    strategic_contradiction_index = (identity_tension + emotional_tension + success_tension + relational_tension + goal_tension) / 5\n\n    # --- Intermediate calculations for salience-weighted cohesion indices ---\n    emotional_cohesion_component = (dimensional_scores[\"hope\"][\"raw_score\"] * dimensional_scores[\"hope\"][\"salience\"] - dimensional_scores[\"fear\"][\"raw_score\"] * dimensional_scores[\"fear\"][\"salience\"])\n    success_cohesion_component = (dimensional_scores[\"compersion\"][\"raw_score\"] * dimensional_scores[\"compersion\"][\"salience\"] - dimensional_scores[\"envy\"][\"raw_score\"] * dimensional_scores[\"envy\"][\"salience\"])\n    relational_cohesion_component = (dimensional_scores[\"amity\"][\"raw_score\"] * dimensional_scores[\"amity\"][\"salience\"] - dimensional_scores[\"enmity\"][\"raw_score\"] * dimensional_scores[\"enmity\"][\"salience\"])\n    goal_cohesion_component = (dimensional_scores[\"cohesive_goals\"][\"raw_score\"] * dimensional_scores[\"cohesive_goals\"][\"salience\"] - dimensional_scores[\"fragmentative_goals\"][\"raw_score\"] * dimensional_scores[\"fragmentative_goals\"][\"salience\"])\n    identity_cohesion_component = (dimensional_scores[\"individual_dignity\"][\"raw_score\"] * dimensional_scores[\"individual_dignity\"][\"salience\"] - dimensional_scores[\"tribal_dominance\"][\"raw_score\"] * dimensional_scores[\"tribal_dominance\"][\"salience\"])\n\n    # --- Salience weight calculations ---\n    descriptive_salience_total = (dimensional_scores[\"hope\"][\"salience\"] + dimensional_scores[\"fear\"][\"salience\"] + dimensional_scores[\"compersion\"][\"salience\"] + dimensional_scores[\"envy\"][\"salience\"] + dimensional_scores[\"amity\"][\"salience\"] + dimensional_scores[\"enmity\"][\"salience\"])\n    motivational_salience_total = (dimensional_scores[\"hope\"][\"salience\"] + dimensional_scores[\"fear\"][\"salience\"] + dimensional_scores[\"compersion\"][\"salience\"] + dimensional_scores[\"envy\"][\"salience\"] + dimensional_scores[\"amity\"][\"salience\"] + dimensional_scores[\"enmity\"][\"salience\"] + dimensional_scores[\"cohesive_goals\"][\"salience\"] + dimensional_scores[\"fragmentative_goals\"][\"salience\"])\n    full_salience_total = (dimensional_scores[\"individual_dignity\"][\"salience\"] + dimensional_scores[\"tribal_dominance\"][\"salience\"] + dimensional_scores[\"hope\"][\"salience\"] + dimensional_scores[\"fear\"][\"salience\"] + dimensional_scores[\"compersion\"][\"salience\"] + dimensional_scores[\"envy\"][\"salience\"] + dimensional_scores[\"amity\"][\"salience\"] + dimensional_scores[\"enmity\"][\"salience\"] + dimensional_scores[\"cohesive_goals\"][\"salience\"] + dimensional_scores[\"fragmentative_goals\"][\"salience\"])\n\n    # --- Final salience-weighted cohesion indices ---\n    epsilon = 0.001\n    descriptive_cohesion_index = (emotional_cohesion_component + success_cohesion_component + relational_cohesion_component) / (descriptive_salience_total + epsilon)\n    motivational_cohesion_index = (emotional_cohesion_component + success_cohesion_component + relational_cohesion_component + goal_cohesion_component) / (motivational_salience_total + epsilon)\n    full_cohesion_index = (identity_cohesion_component + emotional_cohesion_component + success_cohesion_component + relational_cohesion_component + goal_cohesion_component) / (full_salience_total + epsilon)\n\n    derived_metrics = {\n        \"identity_tension\": round(identity_tension, 4),\n        \"emotional_tension\": round(emotional_tension, 4),\n        \"success_tension\": round(success_tension, 4),\n        \"relational_tension\": round(relational_tension, 4),\n        \"goal_tension\": round(goal_tension, 4),\n        \"strategic_contradiction_index\": round(strategic_contradiction_index, 4),\n        \"descriptive_cohesion_index\": round(descriptive_cohesion_index, 4),\n        \"motivational_cohesion_index\": round(motivational_cohesion_index, 4),\n        \"full_cohesion_index\": round(full_cohesion_index, 4)\n    }\n\n    return derived_metrics\n\n# Input scores data\nscores_data = {\n  \"document_id\": \"trump_sotu_2017.txt\",\n  \"document_name\": \"Address Before a Joint Session of the Congress - February 28, 2017\",\n  \"dimensional_scores\": {\n    \"tribal_dominance\": {\n      \"raw_score\": 0.85,\n      \"salience\": 0.8,\n      \"confidence\": 0.9\n    },\n    \"individual_dignity\": {\n      \"raw_score\": 0.4,\n      \"salience\": 0.3,\n      \"confidence\": 0.8\n    },\n    \"fear\": {\n      \"raw_score\": 0.9,\n      \"salience\": 0.8,\n      \"confidence\": 0.95\n    },\n    \"hope\": {\n      \"raw_score\": 0.9,\n      \"salience\": 0.8,\n      \"confidence\": 0.95\n    },\n    \"envy\": {\n      \"raw_score\": 0.7,\n      \"salience\": 0.6,\n      \"confidence\": 0.9\n    },\n    \"compersion\": {\n      \"raw_score\": 0.0,\n      \"salience\": 0.0,\n      \"confidence\": 0.9\n    },\n    \"enmity\": {\n      \"raw_score\": 0.8,\n      \"salience\": 0.7,\n      \"confidence\": 0.95\n    },\n    \"amity\": {\n      \"raw_score\": 0.7,\n      \"salience\": 0.6,\n      \"confidence\": 0.9\n    },\n    \"fragmentative_goals\": {\n      \"raw_score\": 0.6,\n      \"salience\": 0.5,\n      \"confidence\": 0.9\n    },\n    \"cohesive_goals\": {\n      \"raw_score\": 0.9,\n      \"salience\": 0.8,\n      \"confidence\": 0.95\n    }\n  }\n}\n\n# Calculate and print the derived metrics\nderived_metrics_results = calculate_derived_metrics(scores_data)\nprint(json.dumps(derived_metrics_results, indent=2))\n```\n\n```json\n{\n  \"identity_tension\": 0.0,\n  \"emotional_tension\": 0.0,\n  \"success_tension\": 0.0,\n  \"relational_tension\": 0.08,\n  \"goal_tension\": 0.0,\n  \"strategic_contradiction_index\": 0.016,\n  \"descriptive_cohesion_index\": -0.05,\n  \"motivational_cohesion_index\": 0.0417,\n  \"full_cohesion_index\": 0.0333\n}\n```",
  "timestamp": "2025-09-16T21:32:12.979674+00:00"
}