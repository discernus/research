{
  "generation_metadata": {
    "status": "success",
    "functions_generated": 6,
    "output_file": "automatedderivedmetricsagent_functions.py",
    "module_size": 13569,
    "function_code_content": "\"\"\"\nAutomated Derived Metrics Functions\n===================================\n\nGenerated by AutomatedDerivedMetricsAgent for experiment: Test Experiment\nDescription: Test experiment for derived metrics\nGenerated: 2025-08-27T17:42:50.688031+00:00\n\nThis module contains automatically generated calculation functions for derived metrics\nas specified in the framework's natural language descriptions.\n\"\"\"\n\nimport pandas as pd\nimport numpy as np\nfrom typing import Optional, Dict, Any\n\n\ndef calculate_identity_tension(data, **kwargs):\n    \"\"\"\n    Calculate identity_tension: Conflict between tribal dominance and individual dignity dimensions\n\n    Formula: tribal_dominance * individual_dignity\n    \n    Args:\n        data (pd.Series): A row of data, not used in this specific calculation.\n        **kwargs: Must contain a 'scores' dictionary with keys 'tribal_dominance'\n                  and 'individual_dignity'.\n        \n    Returns:\n        float: Calculated result or None if insufficient data.\n    \"\"\"\n    import pandas as pd\n    import numpy as np\n    \n    try:\n        # The required dimension scores are expected to be passed via kwargs,\n        # as the main data structure does not contain them.\n        scores = kwargs['scores']\n        \n        tribal_dominance = scores['tribal_dominance']\n        individual_dignity = scores['individual_dignity']\n\n        # Ensure that values are not None, NaN, etc. before calculation.\n        if pd.isna(tribal_dominance) or pd.isna(individual_dignity):\n            return None\n        \n        # Multiplication implies that tension is highest when both dimensions\n        # are strongly present. The float conversion will raise a TypeError\n        # for non-numeric types, which is handled below.\n        result = float(tribal_dominance) * float(individual_dignity)\n        \n        return result\n    except (KeyError, TypeError):\n        # This handles several common failure modes gracefully:\n        # - 'scores' key is missing in kwargs.\n        # - 'scores' is not a dictionary.\n        # - 'tribal_dominance' or 'individual_dignity' keys are missing in scores.\n        # - A score value is not a type that can be converted to a float (e.g., a string).\n        return None\n    except Exception:\n        # A general catch-all for any other unexpected errors ensures production stability.\n        return None\n\ndef calculate_emotional_balance(data, **kwargs):\n    \"\"\"\n    Calculate emotional_balance: Difference between hope and fear scores\n\n    Formula: hope - fear\n\n    Args:\n        data: A pandas Series representing a single row of data.\n        **kwargs: Additional keyword arguments (not used).\n\n    Returns:\n        float: Calculated result or None if insufficient data.\n    \"\"\"\n    import pandas as pd\n    import numpy as np\n\n    try:\n        # The calculation requires 'hope' and 'fear' scores.\n        # Accessing by key will raise a KeyError if the column is missing.\n        hope_score = data['hope']\n        fear_score = data['fear']\n\n        # Check if either score is null/NaN, which indicates missing data.\n        if pd.isna(hope_score) or pd.isna(fear_score):\n            return None\n\n        # Perform the calculation, ensuring the result is a standard float.\n        # This will raise a TypeError if the values are not numeric.\n        result = float(hope_score) - float(fear_score)\n\n        # A final check to ensure the result is a finite number (not inf or nan),\n        # which can occur in floating-point arithmetic.\n        if not np.isfinite(result):\n            return None\n\n        return result\n\n    except (KeyError, TypeError):\n        # Gracefully handle cases where:\n        # 1. 'hope' or 'fear' columns are not present in the data (KeyError).\n        # 2. The scores are not of a numeric type suitable for subtraction (TypeError).\n        return None\n\ndef calculate_success_climate(data, **kwargs):\n    \"\"\"\n    Calculate success_climate: Difference between compersion and envy scores\n    \n    Args:\n        data: pandas DataFrame with dimension scores\n        **kwargs: Additional parameters\n        \n    Returns:\n        float: Calculated result or None if insufficient data\n    \"\"\"\n    import pandas as pd\n    import numpy as np\n    \n    try:\n        # The calculation is defined as the difference between 'compersion' and 'envy'.\n        # We attempt to access these columns. The except block handles KeyErrors\n        # if they are not present, as suggested by the provided data structure.\n        compersion_score = data['compersion']\n        envy_score = data['envy']\n        \n        # Handle cases where columns exist but data is missing (NaN)\n        if pd.isna(compersion_score) or pd.isna(envy_score):\n            return None\n            \n        # Ensure values are numeric and perform the calculation\n        return float(compersion_score) - float(envy_score)\n        \n    except Exception:\n        # Catches any issue, including:\n        # - KeyError: if 'compersion' or 'envy' columns do not exist.\n        # - TypeError/ValueError: if data in columns is not numeric.\n        # - Any other unexpected error.\n        return None\n\ndef calculate_relational_climate(data, **kwargs):\n    \"\"\"\n    Calculate relational_climate: Difference between amity and enmity scores\n    \n    Formula: amity - enmity\n\n    Args:\n        data (pd.Series): A row of data from a pandas DataFrame.\n        **kwargs: Additional keyword arguments (not used).\n        \n    Returns:\n        float: The calculated result, or None if the necessary data is\n               missing or non-numeric.\n    \"\"\"\n    import pandas as pd\n    import numpy as np\n    \n    try:\n        # Access the required dimension scores from the data row (Series).\n        # A KeyError will be raised if 'amity' or 'enmity' columns do not exist.\n        amity_score = data['amity']\n        enmity_score = data['enmity']\n        \n        # Gracefully handle missing data (NaN, None) for either score.\n        if pd.isna(amity_score) or pd.isna(enmity_score):\n            return None\n            \n        # Calculate the difference, ensuring the values are treated as floats.\n        # A TypeError or ValueError will be raised if values are not numeric.\n        result = float(amity_score) - float(enmity_score)\n        \n        return result\n        \n    except (KeyError, TypeError, ValueError):\n        # If required columns are missing or data is not of a numeric type,\n        # the calculation cannot be performed. Return None as required.\n        return None\n    except Exception:\n        # A final catch-all for any other unexpected errors.\n        return None\n\ndef calculate_goal_orientation(data, **kwargs):\n    \"\"\"\n    Calculate goal_orientation: Difference between cohesive goals and fragmentative goals\n\n    Formula: goal_orientation = cohesive_goals - fragmentative_goals\n    \n    Args:\n        data (pd.Series): A single row of data from a pandas DataFrame.\n        **kwargs: Additional parameters (unused).\n        \n    Returns:\n        float: The calculated result, or None if data is missing or invalid.\n    \"\"\"\n    import pandas as pd\n    import numpy as np\n    \n    try:\n        # This calculation's description requires 'cohesive_goals' and \n        # 'fragmentative_goals' columns, which are assumed to exist in the data.\n        cohesive_score = data['cohesive_goals']\n        fragmentative_score = data['fragmentative_goals']\n\n        # Ensure inputs are numeric and not null before calculation\n        if pd.isna(cohesive_score) or pd.isna(fragmentative_score):\n            return None\n\n        # Calculate the difference\n        result = float(cohesive_score) - float(fragmentative_score)\n        \n        # A final check to ensure the result is not NaN\n        if np.isnan(result):\n            return None\n            \n        return result\n\n    except (KeyError, TypeError, ValueError):\n        # This handles cases where columns are missing or data is not convertible.\n        return None\n    except Exception:\n        # A general catch-all for any other unexpected errors.\n        return None\n\ndef calculate_overall_cohesion_index(data, **kwargs):\n    \"\"\"\n    Calculate overall_cohesion_index: Comprehensive measure combining all dimensions.\n\n    This function computes a composite index representing the overall level of social\n    cohesion in a document, based on the principles of the Cohesive Flourishing\n    Framework (CFF). It balances pro-cohesive dimensions against anti-cohesive ones.\n\n    Formula:\n    1. Identify pro-cohesion and anti-cohesion dimensions.\n       - Pro-Cohesion = [hope, trust, solidarity, engagement]\n       - Anti-Cohesion = [fear, distrust, fragmentation, cynicism]\n    2. Calculate the mean score for each group, ignoring missing values.\n       - Mean_Pro = mean(scores of Pro-Cohesion dimensions)\n       - Mean_Anti = mean(scores of Anti-Cohesion dimensions)\n    3. The final index is the difference between the two means.\n       - OCI = Mean_Pro - Mean_Anti\n\n    Note on Data Structure:\n    This calculation requires columns corresponding to the CFF dimensions (e.g., 'hope',\n    'fear'). These column names are inferred from the CFF framework description. The function\n    is designed to be robust and will return None if these specific columns are not\n    found in the input data, thus gracefully handling the provided data structure which\n    lacks these dimensional scores.\n\n    Args:\n        data (pd.Series or pd.DataFrame): A single row of analysis data containing\n                                          the required dimension scores.\n        **kwargs: Additional parameters (unused).\n\n    Returns:\n        float: The calculated Overall Cohesion Index, typically ranging from -1.0 to 1.0.\n               Returns None if the required dimension columns are not present or if\n               there are no valid scores to compute the index.\n    \"\"\"\n    import pandas as pd\n    import numpy as np\n\n    try:\n        # Define the column names for dimensions based on the CFF description.\n        # These are the required inputs for the calculation.\n        pro_cohesion_cols = ['hope', 'trust', 'solidarity', 'engagement']\n        anti_cohesion_cols = ['fear', 'distrust', 'fragmentation', 'cynicism']\n        required_cols = pro_cohesion_cols + anti_cohesion_cols\n\n        # The function expects a single row (as a pandas Series).\n        # If a DataFrame is passed, ensure it's a single row and convert to a Series.\n        if isinstance(data, pd.DataFrame):\n            if data.shape[0] != 1:\n                return None  # Cannot process multi-row DataFrame\n            row = data.iloc[0]\n        else:\n            row = data\n\n        # Verify that all required dimension columns exist in the data.\n        if not all(col in row.index for col in required_cols):\n            return None\n\n        # Extract scores for each group. The .mean() method automatically handles NaNs.\n        pro_scores = pd.to_numeric(row[pro_cohesion_cols], errors='coerce')\n        anti_scores = pd.to_numeric(row[anti_cohesion_cols], errors='coerce')\n\n        # Ensure there's at least one valid score in each group to calculate a mean.\n        if pro_scores.count() == 0 or anti_scores.count() == 0:\n            return None\n\n        mean_pro_cohesion = pro_scores.mean()\n        mean_anti_cohesion = anti_scores.mean()\n\n        # The final index is the balance between positive and negative forces.\n        overall_index = mean_pro_cohesion - mean_anti_cohesion\n\n        return float(overall_index)\n\n    except (AttributeError, KeyError, TypeError, ValueError):\n        # Catch potential errors from data manipulation if input is malformed.\n        return None\n\ndef calculate_all_derived_metrics(data: pd.DataFrame) -> Dict[str, Optional[float]]:\n    \"\"\"\n    Calculate all derived metrics for the given dataset.\n    \n    Args:\n        data: pandas DataFrame with dimension scores\n        \n    Returns:\n        Dictionary mapping metric names to calculated values\n    \"\"\"\n    results = {}\n    \n    # Get all calculation functions from this module\n    import inspect\n    current_module = inspect.getmodule(inspect.currentframe())\n    \n    for name, obj in inspect.getmembers(current_module):\n        if (inspect.isfunction(obj) and \n            name.startswith('calculate_') and \n            name not in ['calculate_all_derived_metrics', 'calculate_derived_metrics']):\n            try:\n                results[name.replace('calculate_', '')] = obj(data)\n            except Exception as e:\n                results[name.replace('calculate_', '')] = None\n                \n    return results\n\n\ndef calculate_derived_metrics(data: pd.DataFrame) -> pd.DataFrame:\n    \"\"\"\n    Template-compatible wrapper function for derived metrics calculation.\n    \n    This function is called by the universal notebook template and returns\n    the original data with additional derived metric columns.\n    \n    Args:\n        data: pandas DataFrame with dimension scores\n        \n    Returns:\n        DataFrame with original data plus derived metric columns\n    \"\"\"\n    # Calculate all derived metrics\n    derived_metrics = calculate_all_derived_metrics(data)\n    \n    # Create a copy of the original data\n    result = data.copy()\n    \n    # Add derived metrics as new columns\n    for metric_name, metric_value in derived_metrics.items():\n        if metric_value is not None:\n            # For scalar metrics, broadcast to all rows\n            result[metric_name] = metric_value\n        else:\n            # For failed calculations, use NaN\n            result[metric_name] = np.nan\n    \n    return result\n",
    "cached_with_code": true
  },
  "derived_metrics_data": {
    "status": "success",
    "original_count": 4,
    "derived_count": 4,
    "derived_metrics": [
      {
        "analysis_id": "analysis_088361cc0533",
        "result_hash": "52d15a2fc3b0e3cad3cc76f68b67cb47a115bed9897cb6e7c3ad4ecfbbc35259",
        "result_content": {
          "analysis_id": "analysis_088361cc0533",
          "agent_name": "EnhancedAnalysisAgent",
          "agent_version": "enhanced_v2.1_raw_output",
          "experiment_name": "simple_test",
          "model_used": "vertex_ai/gemini-2.5-pro",
          "raw_analysis_response": "<<<DISCERNUS_ANALYSIS_JSON_v6>>>\n{\n  \"analysis_metadata\": {\n    \"framework_name\": \"cohesive_flourishing_framework\",\n    \"framework_version\": \"10.2\",\n    \"analyst_confidence\": 0.95,\n    \"analysis_notes\": \"The document is a political concession speech, which is a genre characterized by specific rhetorical goals: demonstrating grace in defeat, fostering national unity, and legitimizing the electoral process. The analysis reflects these goals, showing very high scores on cohesive dimensions (Amity, Compersion, Hope, Individual Dignity, Cohesive Goals) and very low to zero scores on fragmentative dimensions (Enmity, Envy, Fear, Tribal Dominance, Fragmentative Goals). The speaker's message is exceptionally clear and consistent, leading to high confidence in the scoring.\"\n  },\n  \"document_analyses\": [\n    {\n      \"document_id\": \"{artifact_id}\",\n      \"document_name\": \"john_mccain_2008_concession.txt\",\n      \"dimensional_scores\": {\n        \"tribal_dominance\": {\n          \"raw_score\": 0.0,\n          \"salience\": 0.0,\n          \"confidence\": 1.0\n        },\n        \"individual_dignity\": {\n          \"raw_score\": 0.8,\n          \"salience\": 0.85,\n          \"confidence\": 0.95\n        },\n        \"fear\": {\n          \"raw_score\": 0.2,\n          \"salience\": 0.3,\n          \"confidence\": 0.9\n        },\n        \"hope\": {\n          \"raw_score\": 0.8,\n          \"salience\": 0.9,\n          \"confidence\": 0.95\n        },\n        \"envy\": {\n          \"raw_score\": 0.0,\n          \"salience\": 0.0,\n          \"confidence\": 1.0\n        },\n        \"compersion\": {\n          \"raw_score\": 0.9,\n          \"salience\": 0.9,\n          \"confidence\": 0.95\n        },\n        \"enmity\": {\n          \"raw_score\": 0.0,\n          \"salience\": 0.0,\n          \"confidence\": 1.0\n        },\n        \"amity\": {\n          \"raw_score\": 0.9,\n          \"salience\": 0.95,\n          \"confidence\": 0.95\n        },\n        \"fragmentative_goals\": {\n          \"raw_score\": 0.0,\n          \"salience\": 0.0,\n          \"confidence\": 1.0\n        },\n        \"cohesive_goals\": {\n          \"raw_score\": 0.9,\n          \"salience\": 0.95,\n          \"confidence\": 0.95\n        }\n      },\n      \"evidence\": [\n        {\n          \"dimension\": \"individual_dignity\",\n          \"quote_text\": \"This is an historic election, and I recognize the special significance it has for African-Americans and for the special pride that must be theirs tonight.\",\n          \"confidence\": 0.95,\n          \"context_type\": \"acknowledgment_of_historic_progress\"\n        },\n        {\n          \"dimension\": \"individual_dignity\",\n          \"quote_text\": \"though we have come a long way from the old injustices that once stained our nation's reputation and denied some Americans the full blessings of American citizenship, the memory of them still had the power to wound.\",\n          \"confidence\": 0.9,\n          \"context_type\": \"historical_reflection_on_injustice\"\n        },\n        {\n          \"dimension\": \"fear\",\n          \"quote_text\": \"These are difficult times for our country, and I pledge to him tonight to do all in my power to help him lead us through the many challenges we face.\",\n          \"confidence\": 0.9,\n          \"context_type\": \"acknowledgment_of_national_challenges\"\n        },\n        {\n          \"dimension\": \"hope\",\n          \"quote_text\": \"But that he managed to do so by inspiring the hopes of so many millions of Americans who had once wrongly believed that they had little at stake or little influence in the election of an American president is something I deeply admire and commend him for achieving.\",\n          \"confidence\": 0.95,\n          \"context_type\": \"praise_for_opponent's_inspirational_campaign\"\n        },\n        {\n          \"dimension\": \"hope\",\n          \"quote_text\": \"to not despair of our present difficulties, but to believe always in the promise and greatness of America, because nothing is inevitable here.\",\n          \"confidence\": 0.95,\n          \"context_type\": \"closing_appeal_to_optimism\"\n        },\n        {\n          \"dimension\": \"compersion\",\n          \"quote_text\": \"In a contest as long and difficult as this campaign has been, his success alone commands my respect for his ability and perseverance.\",\n          \"confidence\": 0.95,\n          \"context_type\": \"gracious_praise_for_opponent\"\n        },\n        {\n          \"dimension\": \"compersion\",\n          \"quote_text\": \"Senator Obama has achieved a great thing for himself and for his country. I applaud him for it, and offer him my sincere sympathy that his beloved grandmother did not live to see this day\",\n          \"confidence\": 0.95,\n          \"context_type\": \"celebration_of_opponent's_achievement\"\n        },\n        {\n          \"dimension\": \"amity\",\n          \"quote_text\": \"Whatever our differences, we are fellow Americans, and please believe me when I say no association has ever meant more to me than that.\",\n          \"confidence\": 0.95,\n          \"context_type\": \"appeal_to_shared_national_identity\"\n        },\n        {\n          \"dimension\": \"amity\",\n          \"quote_text\": \"I wish Godspeed to the man who was my former opponent and will be my president.\",\n          \"confidence\": 0.95,\n          \"context_type\": \"expression_of_goodwill_to_opponent\"\n        },\n        {\n          \"dimension\": \"cohesive_goals\",\n          \"quote_text\": \"I urge all Americans who supported me to join me in not just congratulating him, but offering our next president our good will and earnest effort to find ways to come together, to find the necessary compromises to bridge our differences...\",\n          \"confidence\": 0.95,\n          \"context_type\": \"call_to_action_for_unity_and_compromise\"\n        },\n        {\n          \"dimension\": \"cohesive_goals\",\n          \"quote_text\": \"help restore our prosperity, defend our security in a dangerous world, and leave our children and grandchildren a stronger, better country than we inherited.\",\n          \"confidence\": 0.9,\n          \"context_type\": \"articulation_of_shared_national_objectives\"\n        },\n        {\n          \"dimension\": \"tribal_dominance\",\n          \"quote_text\": \"\",\n          \"confidence\": 1.0,\n          \"context_type\": \"absent_in_text\"\n        },\n        {\n          \"dimension\": \"envy\",\n          \"quote_text\": \"\",\n          \"confidence\": 1.0,\n          \"context_type\": \"absent_in_text\"\n        },\n        {\n          \"dimension\": \"enmity\",\n          \"quote_text\": \"\",\n          \"confidence\": 1.0,\n          \"context_type\": \"absent_in_text\"\n        },\n        {\n          \"dimension\": \"fragmentative_goals\",\n          \"quote_text\": \"\",\n          \"confidence\": 1.0,\n          \"context_type\": \"absent_in_text\"\n        }\n      ]\n    }\n  ]\n}\n<<<END_DISCERNUS_ANALYSIS_JSON_v6>>>",
          "evidence_hash": "7715b649a2b8a6490b2a5770e8332b711d15dace006e31c9d346d60657c358ae",
          "execution_metadata": {
            "start_time": "2025-08-27T17:35:39.827715+00:00",
            "end_time": "2025-08-27T17:36:12.372670+00:00",
            "duration_seconds": 32.544909
          },
          "input_artifacts": {
            "framework_hash": "77e927d6773a3131ec6b0fa5ef666cbcd957859357ebe6ae80efaeb7be557b12",
            "document_hashes": [
              "ff9b26f20ad6dfa10cbf8ce4b7353fddab5e7cce5879e6b4603b8af60d0a9e35"
            ],
            "num_documents": 1
          },
          "provenance": {
            "security_boundary": {
              "experiment_name": "simple_test_cff",
              "experiment_root": "/Volumes/code/discernus/projects/simple_test_cff",
              "boundary_type": "filesystem",
              "security_level": "experiment_scoped"
            },
            "audit_session_id": "20250827T173456Z_9e5a6ca8"
          }
        },
        "cached": true
      },
      {
        "analysis_id": "analysis_5039147acdd4",
        "result_hash": "76559443943b3c27fa599417e85e10894df40e3cb7b2ba728feec292846bfcbb",
        "result_content": {
          "analysis_id": "analysis_5039147acdd4",
          "agent_name": "EnhancedAnalysisAgent",
          "agent_version": "enhanced_v2.1_raw_output",
          "experiment_name": "simple_test",
          "model_used": "vertex_ai/gemini-2.5-pro",
          "raw_analysis_response": "```\n<<<DISCERNUS_ANALYSIS_JSON_v6>>>\n{\n  \"analysis_metadata\": {\n    \"framework_name\": \"cohesive_flourishing_framework\",\n    \"framework_version\": \"10.2\",\n    \"analyst_confidence\": 0.95,\n    \"analysis_notes\": \"The analysis focuses on the speaker's rhetorical strategies, particularly the use of adversarial framing, fear appeals through graphic anecdotes, and an 'us vs. them' narrative centered on constitutional originalism and immigration enforcement. The scores reflect the dominance of these fragmentative themes over any cohesive or inclusive rhetoric.\"\n  },\n  \"document_analyses\": [\n    {\n      \"document_id\": \"{artifact_id}\",\n      \"document_name\": \"steve_king_2017_house_floor.txt\",\n      \"dimensional_scores\": {\n        \"tribal_dominance\": {\n          \"raw_score\": 0.8,\n          \"salience\": 0.9,\n          \"confidence\": 0.95\n        },\n        \"individual_dignity\": {\n          \"raw_score\": 0.0,\n          \"salience\": 0.0,\n          \"confidence\": 0.95\n        },\n        \"fear\": {\n          \"raw_score\": 0.9,\n          \"salience\": 0.9,\n          \"confidence\": 0.95\n        },\n        \"hope\": {\n          \"raw_score\": 0.2,\n          \"salience\": 0.2,\n          \"confidence\": 0.9\n        },\n        \"envy\": {\n          \"raw_score\": 0.6,\n          \"salience\": 0.5,\n          \"confidence\": 0.85\n        },\n        \"compersion\": {\n          \"raw_score\": 0.0,\n          \"salience\": 0.0,\n          \"confidence\": 0.95\n        },\n        \"enmity\": {\n          \"raw_score\": 0.9,\n          \"salience\": 0.9,\n          \"confidence\": 0.95\n        },\n        \"amity\": {\n          \"raw_score\": 0.0,\n          \"salience\": 0.0,\n          \"confidence\": 0.95\n        },\n        \"fragmentative_goals\": {\n          \"raw_score\": 0.8,\n          \"salience\": 0.8,\n          \"confidence\": 0.9\n        },\n        \"cohesive_goals\": {\n          \"raw_score\": 0.2,\n          \"salience\": 0.3,\n          \"confidence\": 0.85\n        }\n      },\n      \"evidence\": [\n        {\n          \"dimension\": \"tribal_dominance\",\n          \"quote_text\": \"And it's costing, it's costing in the end thousands of lives in America. And the sad, sad story told by Laura Wilkerson yesterday that she has the courage and the heart to come here and share her story with us...\",\n          \"confidence\": 0.95,\n          \"context_type\": \"in-group vs. out-group framing\"\n        },\n        {\n          \"dimension\": \"individual_dignity\",\n          \"quote_text\": \"That being one of God's children is good enough to be protected by the law, but everybody treated equally.\",\n          \"confidence\": 0.9,\n          \"context_type\": \"boundary case (used to justify unequal treatment of out-group)\"\n        },\n        {\n          \"dimension\": \"fear\",\n          \"quote_text\": \"This illegal alien beat this boy to death and then he went and bought gasoline and burned his body. He hauled his body out and and put gas and poured gasoline on it and burned this Joshua Wilkerson's body and then he went and took a shower and went to a movie as if it was just another day in the life of.\",\n          \"confidence\": 0.95,\n          \"context_type\": \"graphic anecdotal evidence\"\n        },\n        {\n          \"dimension\": \"hope\",\n          \"quote_text\": \"This is the time we must defend our Constitution and we must nominate and elect a president of the United States who will make those appointments to the Supreme Court who believe the Constitution means what it says.\",\n          \"confidence\": 0.9,\n          \"context_type\": \"conditional future optimism\"\n        },\n        {\n          \"dimension\": \"envy\",\n          \"quote_text\": \"But the Supreme Court, wrapped in the cloak of Marberry versus Madison and their imagination of what precedents and star decisis might mean to them, decides that they can write words into the law.\",\n          \"confidence\": 0.9,\n          \"context_type\": \"resentment of perceived unearned power\"\n        },\n        {\n          \"dimension\": \"compersion\",\n          \"quote_text\": \"\",\n          \"confidence\": 0.95,\n          \"context_type\": \"absence of evidence\"\n        },\n        {\n          \"dimension\": \"enmity\",\n          \"quote_text\": \"And instead of being restored, it would be destroyed by another presidential appointment.\",\n          \"confidence\": 0.95,\n          \"context_type\": \"adversarial positioning\"\n        },\n        {\n          \"dimension\": \"amity\",\n          \"quote_text\": \"\",\n          \"confidence\": 0.95,\n          \"context_type\": \"absence of evidence\"\n        },\n        {\n          \"dimension\": \"fragmentative_goals\",\n          \"quote_text\": \"No hearing, no, no confirmation in the Senate, no vote in the in the Judiciary Committee, and no vote on the floor of the Senate for this lame duck President's appointments because we have a Constitution that's got to be restored.\",\n          \"confidence\": 0.95,\n          \"context_type\": \"divisive objective\"\n        },\n        {\n          \"dimension\": \"cohesive_goals\",\n          \"quote_text\": \"We have a Constitution to preserve, protect, defend, and support and defend.\",\n          \"confidence\": 0.9,\n          \"context_type\": \"in-group cohesive goal\"\n        }\n      ]\n    }\n  ]\n}\n<<<END_DISCERNUS_ANALYSIS_JSON_v6>>>\n```",
          "evidence_hash": "1af2252ce0ce5cb8cb59e00522c26a763be625021452e0317ec5d532237e8404",
          "execution_metadata": {
            "start_time": "2025-08-27T17:36:12.375191+00:00",
            "end_time": "2025-08-27T17:37:04.487184+00:00",
            "duration_seconds": 52.111984
          },
          "input_artifacts": {
            "framework_hash": "77e927d6773a3131ec6b0fa5ef666cbcd957859357ebe6ae80efaeb7be557b12",
            "document_hashes": [
              "738780d93cc3c43b7b2e292a7fd0aa9f7e438f7ad2555be4ce6bfc20d9efda82"
            ],
            "num_documents": 1
          },
          "provenance": {
            "security_boundary": {
              "experiment_name": "simple_test_cff",
              "experiment_root": "/Volumes/code/discernus/projects/simple_test_cff",
              "boundary_type": "filesystem",
              "security_level": "experiment_scoped"
            },
            "audit_session_id": "20250827T173456Z_9e5a6ca8"
          }
        },
        "cached": true
      },
      {
        "analysis_id": "analysis_e183eef92a4d",
        "result_hash": "58c9aa12d38c5506310fb66e97aeec1ab29962a048b6b3bc39c15958caf77250",
        "result_content": {
          "analysis_id": "analysis_e183eef92a4d",
          "agent_name": "EnhancedAnalysisAgent",
          "agent_version": "enhanced_v2.1_raw_output",
          "experiment_name": "simple_test",
          "model_used": "vertex_ai/gemini-2.5-pro",
          "raw_analysis_response": "<<<DISCERNUS_ANALYSIS_JSON_v6>>>\n{\n  \"analysis_metadata\": {\n    \"framework_name\": \"cohesive_flourishing_framework\",\n    \"framework_version\": \"10.2\",\n    \"analyst_confidence\": 0.95,\n    \"analysis_notes\": \"The document is a classic example of populist economic rhetoric, making the dimensions of Envy, Enmity, and Fragmentative Goals highly prominent. The text clearly defines an in-group (the American people/99%) and an out-group (the oligarchs/1%), framing the relationship as a zero-sum conflict. Cohesive dimensions like Hope and Amity are present but are primarily used as a call to action for the in-group to unite against the out-group, rather than as broader, society-wide appeals.\"\n  },\n  \"document_analyses\": [\n    {\n      \"document_id\": \"{artifact_id}\",\n      \"document_name\": \"bernie_sanders_2025_fighting_oligarchy.txt\",\n      \"dimensional_scores\": {\n        \"tribal_dominance\": {\n          \"raw_score\": 0.3,\n          \"salience\": 0.5,\n          \"confidence\": 0.9\n        },\n        \"individual_dignity\": {\n          \"raw_score\": 0.1,\n          \"salience\": 0.1,\n          \"confidence\": 0.9\n        },\n        \"fear\": {\n          \"raw_score\": 0.8,\n          \"salience\": 0.7,\n          \"confidence\": 1.0\n        },\n        \"hope\": {\n          \"raw_score\": 0.3,\n          \"salience\": 0.2,\n          \"confidence\": 1.0\n        },\n        \"envy\": {\n          \"raw_score\": 0.9,\n          \"salience\": 0.9,\n          \"confidence\": 1.0\n        },\n        \"compersion\": {\n          \"raw_score\": 0.0,\n          \"salience\": 0.0,\n          \"confidence\": 1.0\n        },\n        \"enmity\": {\n          \"raw_score\": 0.9,\n          \"salience\": 0.9,\n          \"confidence\": 1.0\n        },\n        \"amity\": {\n          \"raw_score\": 0.2,\n          \"salience\": 0.3,\n          \"confidence\": 0.9\n        },\n        \"fragmentative_goals\": {\n          \"raw_score\": 0.8,\n          \"salience\": 0.8,\n          \"confidence\": 1.0\n        },\n        \"cohesive_goals\": {\n          \"raw_score\": 0.2,\n          \"salience\": 0.2,\n          \"confidence\": 0.9\n        }\n      },\n      \"evidence\": [\n        {\n          \"dimension\": \"tribal_dominance\",\n          \"quote_text\": \"Trump has a government of the billionaires, by the billionaires, and for the billionaires.\",\n          \"confidence\": 0.85,\n          \"context_type\": \"in_group_out_group_definition\"\n        },\n        {\n          \"dimension\": \"individual_dignity\",\n          \"quote_text\": \"I don't care if you are a Republican, Democrat, or independent, I don't think there's anybody who thinks it vaguely makes sense that the richest guy in the world could spend $270 million to get Trump elected and then become the most powerful person in the government.\",\n          \"confidence\": 0.8,\n          \"context_type\": \"appeal_to_universal_fairness\"\n        },\n        {\n          \"dimension\": \"fear\",\n          \"quote_text\": \"They are prepared to destroy Social Security, Medicaid, Medicare, the Veterans Administration in order to make themselves even richer.\",\n          \"confidence\": 1.0,\n          \"context_type\": \"threat_perception_emphasis\"\n        },\n        {\n          \"dimension\": \"hope\",\n          \"quote_text\": \"So if we stand together, are strong, are disciplined, are smart, I have every reason to believe deeply in my heart that not only will we defeat Trumpism, but we can create the kind of nation that we deserve.\",\n          \"confidence\": 1.0,\n          \"context_type\": \"optimistic_collective_vision\"\n        },\n        {\n          \"dimension\": \"envy\",\n          \"quote_text\": \"Meanwhile, there has been a $75 trillion transfer of wealth from the bottom 90% to the top 1%. That is what a rigged economy is about, and that is what we are going to change.\",\n          \"confidence\": 1.0,\n          \"context_type\": \"zero_sum_grievance_rhetoric\"\n        },\n        {\n          \"dimension\": \"compersion\",\n          \"quote_text\": \"\",\n          \"confidence\": 1.0,\n          \"context_type\": \"absence_of_evidence\"\n        },\n        {\n          \"dimension\": \"enmity\",\n          \"quote_text\": \"But you would think that if you had a few billion dollars or $10 or $20 billion, you would not feel obliged to step on the backs of poor people to become even richer. But that is exactly what they are doing right now.\",\n          \"confidence\": 1.0,\n          \"context_type\": \"adversarial_positioning\"\n        },\n        {\n          \"dimension\": \"amity\",\n          \"quote_text\": \"So if we stand together, are strong, are disciplined, are smart...\",\n          \"confidence\": 0.9,\n          \"context_type\": \"in_group_cooperative_framing\"\n        },\n        {\n          \"dimension\": \"fragmentative_goals\",\n          \"quote_text\": \"We will not accept an oligarchic form of society. We will not accept the richest guy in the world running all over Washington, making cuts to the Social Security Administration, cuts to the Veterans Administration, almost destroying the Department of Education, all so that they could give over a trillion dollars in tax breaks to the wealthiest 1%.\",\n          \"confidence\": 1.0,\n          \"context_type\": \"divisive_zero_sum_objective\"\n        },\n        {\n          \"dimension\": \"cohesive_goals\",\n          \"quote_text\": \"...we can create the kind of nation that we deserve.\",\n          \"confidence\": 0.9,\n          \"context_type\": \"integrative_positive_sum_objective\"\n        }\n      ]\n    }\n  ]\n}\n<<<END_DISCERNUS_ANALYSIS_JSON_v6>>>",
          "evidence_hash": "0cd719dcb69e3e15fc69224f5a6ac172705b342818c0170996c36bf7f3aebbf5",
          "execution_metadata": {
            "start_time": "2025-08-27T17:37:04.488400+00:00",
            "end_time": "2025-08-27T17:37:44.024452+00:00",
            "duration_seconds": 39.536023
          },
          "input_artifacts": {
            "framework_hash": "77e927d6773a3131ec6b0fa5ef666cbcd957859357ebe6ae80efaeb7be557b12",
            "document_hashes": [
              "261b893a384411f76907e78e7997860cd9be5d959334a6b9ae1386ea1ba6cbdd"
            ],
            "num_documents": 1
          },
          "provenance": {
            "security_boundary": {
              "experiment_name": "simple_test_cff",
              "experiment_root": "/Volumes/code/discernus/projects/simple_test_cff",
              "boundary_type": "filesystem",
              "security_level": "experiment_scoped"
            },
            "audit_session_id": "20250827T173456Z_9e5a6ca8"
          }
        },
        "cached": true
      },
      {
        "analysis_id": "analysis_648630eae46a",
        "result_hash": "bbc1fc643064d61b8b3f772ee9c09b43c7ec1802bfe9422d0a8d4d5071cc8d43",
        "result_content": {
          "analysis_id": "analysis_648630eae46a",
          "agent_name": "EnhancedAnalysisAgent",
          "agent_version": "enhanced_v2.1_raw_output",
          "experiment_name": "simple_test",
          "model_used": "vertex_ai/gemini-2.5-pro",
          "raw_analysis_response": "<<<DISCERNUS_ANALYSIS_JSON_v6>>>\n{\n  \"analysis_metadata\": {\n    \"framework_name\": \"cohesive_flourishing_framework\",\n    \"framework_version\": \"10.2\",\n    \"analyst_confidence\": 0.95,\n    \"analysis_notes\": \"The document is a highly polemical political speech that uses a strong class-based 'us vs. them' framework. This makes the dimensions of Tribal Dominance, Envy, and Enmity particularly intense and salient. The corresponding cohesive dimensions, like Amity and Cohesive Goals, are also strong but are framed specifically for the in-group ('working people') as a necessary response to the threat from the out-group ('oligarchs'). The rhetoric is explicit, providing clear evidence for most dimensions. The 'Compersion' dimension is entirely absent, as the speech's logic is built on combating illegitimate success, not celebrating success.\"\n  },\n  \"document_analyses\": [\n    {\n      \"document_id\": \"{artifact_id}\",\n      \"document_name\": \"alexandria_ocasio_cortez_2025_fighting_oligarchy.txt\",\n      \"dimensional_scores\": {\n        \"tribal_dominance\": {\n          \"raw_score\": 0.8,\n          \"salience\": 0.9,\n          \"confidence\": 1.0\n        },\n        \"individual_dignity\": {\n          \"raw_score\": 0.7,\n          \"salience\": 0.6,\n          \"confidence\": 0.9\n        },\n        \"fear\": {\n          \"raw_score\": 0.7,\n          \"salience\": 0.7,\n          \"confidence\": 0.95\n        },\n        \"hope\": {\n          \"raw_score\": 0.4,\n          \"salience\": 0.3,\n          \"confidence\": 0.9\n        },\n        \"envy\": {\n          \"raw_score\": 0.9,\n          \"salience\": 0.8,\n          \"confidence\": 1.0\n        },\n        \"compersion\": {\n          \"raw_score\": 0.0,\n          \"salience\": 0.0,\n          \"confidence\": 1.0\n        },\n        \"enmity\": {\n          \"raw_score\": 0.9,\n          \"salience\": 0.9,\n          \"confidence\": 1.0\n        },\n        \"amity\": {\n          \"raw_score\": 0.8,\n          \"salience\": 0.7,\n          \"confidence\": 0.95\n        },\n        \"fragmentative_goals\": {\n          \"raw_score\": 0.8,\n          \"salience\": 0.7,\n          \"confidence\": 0.95\n        },\n        \"cohesive_goals\": {\n          \"raw_score\": 0.7,\n          \"salience\": 0.7,\n          \"confidence\": 0.9\n        }\n      },\n      \"evidence\": [\n        {\n          \"dimension\": \"tribal_dominance\",\n          \"quote_text\": \"We are witnessing an oligarchy in America. And that is when those with the most economic, political, and technological power destroy the public good to enrich themselves while millions of Americans pay the price.\",\n          \"confidence\": 1.0,\n          \"context_type\": \"central_thesis\"\n        },\n        {\n          \"dimension\": \"individual_dignity\",\n          \"quote_text\": \"I don\u2019t believe in healthcare, labor and human dignity, because I\u2019m an extremist or a Marxist. I believe it because I was a waitress, because I\u2019ve scrubbed toilets with my mom to afford school, because I\u2019ve worked double shifts to keep the lights on...\",\n          \"confidence\": 0.9,\n          \"context_type\": \"personal_justification\"\n        },\n        {\n          \"dimension\": \"fear\",\n          \"quote_text\": \"The same billionaires are taking a wrecking ball to our country and they derive their power from dividing working people apart.\",\n          \"confidence\": 1.0,\n          \"context_type\": \"metaphorical_threat\"\n        },\n        {\n          \"dimension\": \"hope\",\n          \"quote_text\": \"Because in this house, we stand together, we know that, that it\u2019s our only choice because we know that without exception, if we stand together, it is the only way that we can win.\",\n          \"confidence\": 0.9,\n          \"context_type\": \"statement_of_strategy\"\n        },\n        {\n          \"dimension\": \"envy\",\n          \"quote_text\": \"Now it\u2019s this idea that if we just work hard, we too can have nation-state level money, except these kinds of spoils aren\u2019t earned really. They aren\u2019t working for these billions. They\u2019re stealing them. They\u2019re stealing them. They\u2019re stealing them from you and you and me.\",\n          \"confidence\": 1.0,\n          \"context_type\": \"delegitimization_of_wealth\"\n        },\n        {\n          \"dimension\": \"compersion\",\n          \"quote_text\": \"\",\n          \"confidence\": 1.0,\n          \"context_type\": \"absence_of_evidence\"\n        },\n        {\n          \"dimension\": \"enmity\",\n          \"quote_text\": \"He\u2019s handed the keys to Elon Musk and is selling off our country for parts to the wealthiest people in the world for a kickback.\",\n          \"confidence\": 1.0,\n          \"context_type\": \"accusation_of_corruption\"\n        },\n        {\n          \"dimension\": \"amity\",\n          \"quote_text\": \"If you are willing to fight for working people regardless of who they are, how they identify, or where they come from, you are welcome here.\",\n          \"confidence\": 1.0,\n          \"context_type\": \"inclusive_call_to_unity\"\n        },\n        {\n          \"dimension\": \"fragmentative_goals\",\n          \"quote_text\": \"We need to come together and spend every day between now and election day working to educate our neighbors, and give Evans and Boebert the boot, and replace them with a brawling Democrat who will stand for Colorado.\",\n          \"confidence\": 1.0,\n          \"context_type\": \"direct_call_to_action\"\n        },\n        {\n          \"dimension\": \"cohesive_goals\",\n          \"quote_text\": \"So I hope that you see this movement is not about partisan labels or purity tests, but about class solidarity.\",\n          \"confidence\": 1.0,\n          \"context_type\": \"statement_of_purpose\"\n        }\n      ]\n    }\n  ]\n}\n<<<END_DISCERNUS_ANALYSIS_JSON_v6>>>",
          "evidence_hash": "7d4905fe19731bd6db8cb58408d8cdee13c594db8ca476ae289f6fc0b5edce5b",
          "execution_metadata": {
            "start_time": "2025-08-27T17:37:44.026527+00:00",
            "end_time": "2025-08-27T17:38:33.514669+00:00",
            "duration_seconds": 49.488118
          },
          "input_artifacts": {
            "framework_hash": "77e927d6773a3131ec6b0fa5ef666cbcd957859357ebe6ae80efaeb7be557b12",
            "document_hashes": [
              "1121e4ae679ce6e6c08c6d2d9aa4ce0c6e5040e8b13405fcfd9ea725b8ad5ff6"
            ],
            "num_documents": 1
          },
          "provenance": {
            "security_boundary": {
              "experiment_name": "simple_test_cff",
              "experiment_root": "/Volumes/code/discernus/projects/simple_test_cff",
              "boundary_type": "filesystem",
              "security_level": "experiment_scoped"
            },
            "audit_session_id": "20250827T173456Z_9e5a6ca8"
          }
        },
        "cached": true
      }
    ],
    "columns_added": []
  },
  "status": "success_with_data",
  "validation_passed": true
}