{
  "generation_metadata": {
    "status": "success",
    "functions_generated": 6,
    "output_file": "automatedderivedmetricsagent_functions.py",
    "module_size": 13569,
    "function_code_content": "\"\"\"\nAutomated Derived Metrics Functions\n===================================\n\nGenerated by AutomatedDerivedMetricsAgent for experiment: Test Experiment\nDescription: Test experiment for derived metrics\nGenerated: 2025-08-27T17:42:50.688031+00:00\n\nThis module contains automatically generated calculation functions for derived metrics\nas specified in the framework's natural language descriptions.\n\"\"\"\n\nimport pandas as pd\nimport numpy as np\nfrom typing import Optional, Dict, Any\n\n\ndef calculate_identity_tension(data, **kwargs):\n    \"\"\"\n    Calculate identity_tension: Conflict between tribal dominance and individual dignity dimensions\n\n    Formula: tribal_dominance * individual_dignity\n    \n    Args:\n        data (pd.Series): A row of data, not used in this specific calculation.\n        **kwargs: Must contain a 'scores' dictionary with keys 'tribal_dominance'\n                  and 'individual_dignity'.\n        \n    Returns:\n        float: Calculated result or None if insufficient data.\n    \"\"\"\n    import pandas as pd\n    import numpy as np\n    \n    try:\n        # The required dimension scores are expected to be passed via kwargs,\n        # as the main data structure does not contain them.\n        scores = kwargs['scores']\n        \n        tribal_dominance = scores['tribal_dominance']\n        individual_dignity = scores['individual_dignity']\n\n        # Ensure that values are not None, NaN, etc. before calculation.\n        if pd.isna(tribal_dominance) or pd.isna(individual_dignity):\n            return None\n        \n        # Multiplication implies that tension is highest when both dimensions\n        # are strongly present. The float conversion will raise a TypeError\n        # for non-numeric types, which is handled below.\n        result = float(tribal_dominance) * float(individual_dignity)\n        \n        return result\n    except (KeyError, TypeError):\n        # This handles several common failure modes gracefully:\n        # - 'scores' key is missing in kwargs.\n        # - 'scores' is not a dictionary.\n        # - 'tribal_dominance' or 'individual_dignity' keys are missing in scores.\n        # - A score value is not a type that can be converted to a float (e.g., a string).\n        return None\n    except Exception:\n        # A general catch-all for any other unexpected errors ensures production stability.\n        return None\n\ndef calculate_emotional_balance(data, **kwargs):\n    \"\"\"\n    Calculate emotional_balance: Difference between hope and fear scores\n\n    Formula: hope - fear\n\n    Args:\n        data: A pandas Series representing a single row of data.\n        **kwargs: Additional keyword arguments (not used).\n\n    Returns:\n        float: Calculated result or None if insufficient data.\n    \"\"\"\n    import pandas as pd\n    import numpy as np\n\n    try:\n        # The calculation requires 'hope' and 'fear' scores.\n        # Accessing by key will raise a KeyError if the column is missing.\n        hope_score = data['hope']\n        fear_score = data['fear']\n\n        # Check if either score is null/NaN, which indicates missing data.\n        if pd.isna(hope_score) or pd.isna(fear_score):\n            return None\n\n        # Perform the calculation, ensuring the result is a standard float.\n        # This will raise a TypeError if the values are not numeric.\n        result = float(hope_score) - float(fear_score)\n\n        # A final check to ensure the result is a finite number (not inf or nan),\n        # which can occur in floating-point arithmetic.\n        if not np.isfinite(result):\n            return None\n\n        return result\n\n    except (KeyError, TypeError):\n        # Gracefully handle cases where:\n        # 1. 'hope' or 'fear' columns are not present in the data (KeyError).\n        # 2. The scores are not of a numeric type suitable for subtraction (TypeError).\n        return None\n\ndef calculate_success_climate(data, **kwargs):\n    \"\"\"\n    Calculate success_climate: Difference between compersion and envy scores\n    \n    Args:\n        data: pandas DataFrame with dimension scores\n        **kwargs: Additional parameters\n        \n    Returns:\n        float: Calculated result or None if insufficient data\n    \"\"\"\n    import pandas as pd\n    import numpy as np\n    \n    try:\n        # The calculation is defined as the difference between 'compersion' and 'envy'.\n        # We attempt to access these columns. The except block handles KeyErrors\n        # if they are not present, as suggested by the provided data structure.\n        compersion_score = data['compersion']\n        envy_score = data['envy']\n        \n        # Handle cases where columns exist but data is missing (NaN)\n        if pd.isna(compersion_score) or pd.isna(envy_score):\n            return None\n            \n        # Ensure values are numeric and perform the calculation\n        return float(compersion_score) - float(envy_score)\n        \n    except Exception:\n        # Catches any issue, including:\n        # - KeyError: if 'compersion' or 'envy' columns do not exist.\n        # - TypeError/ValueError: if data in columns is not numeric.\n        # - Any other unexpected error.\n        return None\n\ndef calculate_relational_climate(data, **kwargs):\n    \"\"\"\n    Calculate relational_climate: Difference between amity and enmity scores\n    \n    Formula: amity - enmity\n\n    Args:\n        data (pd.Series): A row of data from a pandas DataFrame.\n        **kwargs: Additional keyword arguments (not used).\n        \n    Returns:\n        float: The calculated result, or None if the necessary data is\n               missing or non-numeric.\n    \"\"\"\n    import pandas as pd\n    import numpy as np\n    \n    try:\n        # Access the required dimension scores from the data row (Series).\n        # A KeyError will be raised if 'amity' or 'enmity' columns do not exist.\n        amity_score = data['amity']\n        enmity_score = data['enmity']\n        \n        # Gracefully handle missing data (NaN, None) for either score.\n        if pd.isna(amity_score) or pd.isna(enmity_score):\n            return None\n            \n        # Calculate the difference, ensuring the values are treated as floats.\n        # A TypeError or ValueError will be raised if values are not numeric.\n        result = float(amity_score) - float(enmity_score)\n        \n        return result\n        \n    except (KeyError, TypeError, ValueError):\n        # If required columns are missing or data is not of a numeric type,\n        # the calculation cannot be performed. Return None as required.\n        return None\n    except Exception:\n        # A final catch-all for any other unexpected errors.\n        return None\n\ndef calculate_goal_orientation(data, **kwargs):\n    \"\"\"\n    Calculate goal_orientation: Difference between cohesive goals and fragmentative goals\n\n    Formula: goal_orientation = cohesive_goals - fragmentative_goals\n    \n    Args:\n        data (pd.Series): A single row of data from a pandas DataFrame.\n        **kwargs: Additional parameters (unused).\n        \n    Returns:\n        float: The calculated result, or None if data is missing or invalid.\n    \"\"\"\n    import pandas as pd\n    import numpy as np\n    \n    try:\n        # This calculation's description requires 'cohesive_goals' and \n        # 'fragmentative_goals' columns, which are assumed to exist in the data.\n        cohesive_score = data['cohesive_goals']\n        fragmentative_score = data['fragmentative_goals']\n\n        # Ensure inputs are numeric and not null before calculation\n        if pd.isna(cohesive_score) or pd.isna(fragmentative_score):\n            return None\n\n        # Calculate the difference\n        result = float(cohesive_score) - float(fragmentative_score)\n        \n        # A final check to ensure the result is not NaN\n        if np.isnan(result):\n            return None\n            \n        return result\n\n    except (KeyError, TypeError, ValueError):\n        # This handles cases where columns are missing or data is not convertible.\n        return None\n    except Exception:\n        # A general catch-all for any other unexpected errors.\n        return None\n\ndef calculate_overall_cohesion_index(data, **kwargs):\n    \"\"\"\n    Calculate overall_cohesion_index: Comprehensive measure combining all dimensions.\n\n    This function computes a composite index representing the overall level of social\n    cohesion in a document, based on the principles of the Cohesive Flourishing\n    Framework (CFF). It balances pro-cohesive dimensions against anti-cohesive ones.\n\n    Formula:\n    1. Identify pro-cohesion and anti-cohesion dimensions.\n       - Pro-Cohesion = [hope, trust, solidarity, engagement]\n       - Anti-Cohesion = [fear, distrust, fragmentation, cynicism]\n    2. Calculate the mean score for each group, ignoring missing values.\n       - Mean_Pro = mean(scores of Pro-Cohesion dimensions)\n       - Mean_Anti = mean(scores of Anti-Cohesion dimensions)\n    3. The final index is the difference between the two means.\n       - OCI = Mean_Pro - Mean_Anti\n\n    Note on Data Structure:\n    This calculation requires columns corresponding to the CFF dimensions (e.g., 'hope',\n    'fear'). These column names are inferred from the CFF framework description. The function\n    is designed to be robust and will return None if these specific columns are not\n    found in the input data, thus gracefully handling the provided data structure which\n    lacks these dimensional scores.\n\n    Args:\n        data (pd.Series or pd.DataFrame): A single row of analysis data containing\n                                          the required dimension scores.\n        **kwargs: Additional parameters (unused).\n\n    Returns:\n        float: The calculated Overall Cohesion Index, typically ranging from -1.0 to 1.0.\n               Returns None if the required dimension columns are not present or if\n               there are no valid scores to compute the index.\n    \"\"\"\n    import pandas as pd\n    import numpy as np\n\n    try:\n        # Define the column names for dimensions based on the CFF description.\n        # These are the required inputs for the calculation.\n        pro_cohesion_cols = ['hope', 'trust', 'solidarity', 'engagement']\n        anti_cohesion_cols = ['fear', 'distrust', 'fragmentation', 'cynicism']\n        required_cols = pro_cohesion_cols + anti_cohesion_cols\n\n        # The function expects a single row (as a pandas Series).\n        # If a DataFrame is passed, ensure it's a single row and convert to a Series.\n        if isinstance(data, pd.DataFrame):\n            if data.shape[0] != 1:\n                return None  # Cannot process multi-row DataFrame\n            row = data.iloc[0]\n        else:\n            row = data\n\n        # Verify that all required dimension columns exist in the data.\n        if not all(col in row.index for col in required_cols):\n            return None\n\n        # Extract scores for each group. The .mean() method automatically handles NaNs.\n        pro_scores = pd.to_numeric(row[pro_cohesion_cols], errors='coerce')\n        anti_scores = pd.to_numeric(row[anti_cohesion_cols], errors='coerce')\n\n        # Ensure there's at least one valid score in each group to calculate a mean.\n        if pro_scores.count() == 0 or anti_scores.count() == 0:\n            return None\n\n        mean_pro_cohesion = pro_scores.mean()\n        mean_anti_cohesion = anti_scores.mean()\n\n        # The final index is the balance between positive and negative forces.\n        overall_index = mean_pro_cohesion - mean_anti_cohesion\n\n        return float(overall_index)\n\n    except (AttributeError, KeyError, TypeError, ValueError):\n        # Catch potential errors from data manipulation if input is malformed.\n        return None\n\ndef calculate_all_derived_metrics(data: pd.DataFrame) -> Dict[str, Optional[float]]:\n    \"\"\"\n    Calculate all derived metrics for the given dataset.\n    \n    Args:\n        data: pandas DataFrame with dimension scores\n        \n    Returns:\n        Dictionary mapping metric names to calculated values\n    \"\"\"\n    results = {}\n    \n    # Get all calculation functions from this module\n    import inspect\n    current_module = inspect.getmodule(inspect.currentframe())\n    \n    for name, obj in inspect.getmembers(current_module):\n        if (inspect.isfunction(obj) and \n            name.startswith('calculate_') and \n            name not in ['calculate_all_derived_metrics', 'calculate_derived_metrics']):\n            try:\n                results[name.replace('calculate_', '')] = obj(data)\n            except Exception as e:\n                results[name.replace('calculate_', '')] = None\n                \n    return results\n\n\ndef calculate_derived_metrics(data: pd.DataFrame) -> pd.DataFrame:\n    \"\"\"\n    Template-compatible wrapper function for derived metrics calculation.\n    \n    This function is called by the universal notebook template and returns\n    the original data with additional derived metric columns.\n    \n    Args:\n        data: pandas DataFrame with dimension scores\n        \n    Returns:\n        DataFrame with original data plus derived metric columns\n    \"\"\"\n    # Calculate all derived metrics\n    derived_metrics = calculate_all_derived_metrics(data)\n    \n    # Create a copy of the original data\n    result = data.copy()\n    \n    # Add derived metrics as new columns\n    for metric_name, metric_value in derived_metrics.items():\n        if metric_value is not None:\n            # For scalar metrics, broadcast to all rows\n            result[metric_name] = metric_value\n        else:\n            # For failed calculations, use NaN\n            result[metric_name] = np.nan\n    \n    return result\n",
    "cached_with_code": true
  },
  "derived_metrics_data": {
    "status": "success",
    "original_count": 4,
    "derived_count": 4,
    "derived_metrics": [
      {
        "analysis_id": "analysis_77cad64bf278",
        "result_hash": "8c3b45bebf45c83a0d05ed7c70933cedd13e988a85665e6f06fa468d9db1c51c",
        "result_content": {
          "analysis_id": "analysis_77cad64bf278",
          "agent_name": "EnhancedAnalysisAgent",
          "agent_version": "enhanced_v2.1_raw_output",
          "experiment_name": "simple_test",
          "model_used": "vertex_ai/gemini-2.5-flash",
          "raw_analysis_response": "<<<DISCERNUS_ANALYSIS_JSON_v6>>>\n{\n  \"analysis_metadata\": {\n    \"framework_name\": \"cohesive_flourishing_framework\",\n    \"framework_version\": \"10.2\",\n    \"analyst_confidence\": 0.95,\n    \"analysis_notes\": \"Analysis of a political concession speech, typically characterized by calls for unity and acknowledgement of the winner. The speech strongly aligns with positive, cohesive dimensions.\"\n  },\n  \"document_analyses\": [\n    {\n      \"document_id\": \"{artifact_id}\",\n      \"document_name\": \"john_mccain_2008_concession.txt\",\n      \"dimensional_scores\": {\n        \"tribal_dominance\": {\n          \"raw_score\": 0.0,\n          \"salience\": 0.0,\n          \"confidence\": 1.0\n        },\n        \"individual_dignity\": {\n          \"raw_score\": 0.9,\n          \"salience\": 0.8,\n          \"confidence\": 1.0\n        },\n        \"fear\": {\n          \"raw_score\": 0.3,\n          \"salience\": 0.2,\n          \"confidence\": 0.9\n        },\n        \"hope\": {\n          \"raw_score\": 0.9,\n          \"salience\": 0.8,\n          \"confidence\": 1.0\n        },\n        \"envy\": {\n          \"raw_score\": 0.0,\n          \"salience\": 0.0,\n          \"confidence\": 1.0\n        },\n        \"compassion\": {\n          \"raw_score\": 0.9,\n          \"salience\": 0.8,\n          \"confidence\": 1.0\n        },\n        \"enmity\": {\n          \"raw_score\": 0.1,\n          \"salience\": 0.1,\n          \"confidence\": 0.9\n        },\n        \"amity\": {\n          \"raw_score\": 0.9,\n          \"salience\": 0.9,\n          \"confidence\": 1.0\n        },\n        \"fragmentative_goals\": {\n          \"raw_score\": 0.0,\n          \"salience\": 0.0,\n          \"confidence\": 1.0\n        },\n        \"cohesive_goals\": {\n          \"raw_score\": 0.9,\n          \"salience\": 0.9,\n          \"confidence\": 1.0\n        }\n      },\n      \"evidence\": [\n        {\n          \"dimension\": \"tribal_dominance\",\n          \"quote_text\": \"\",\n          \"confidence\": 1.0,\n          \"context_type\": \"absence\"\n        },\n        {\n          \"dimension\": \"individual_dignity\",\n          \"quote_text\": \"I've always believed that America offers opportunities to all who have the industry and will to seize it. Senator Obama believes that too. But we both recognize that though we have come a long way from the old injustices that once stained our nation's reputation and denied some Americans the full blessings of American citizenship, the memory of them still had the power to wound. A century ago, President Theodore Roosevelt's invitation of Booker T. Washington to dine at the White House was taken as an outrage in many quarters. America today is a world away from the cruel and prideful bigotry of that time. There is no better evidence of this than the election of an African-American to the presidency of the United States.\",\n          \"confidence\": 1.0,\n          \"context_type\": \"explicit statement\"\n        },\n        {\n          \"dimension\": \"fear\",\n          \"quote_text\": \"These are difficult times for our country, and I pledge to him tonight to do all in my power to help him lead us through the many challenges we face.\",\n          \"confidence\": 0.9,\n          \"context_type\": \"acknowledgement of challenges\"\n        },\n        {\n          \"dimension\": \"hope\",\n          \"quote_text\": \"But that he managed to do so by inspiring the hopes of so many millions of Americans who had once wrongly believed that they had little at stake or little influence in the election of an American president is something I deeply admire and commend him for achieving.\",\n          \"confidence\": 1.0,\n          \"context_type\": \"rhetorical framing\"\n        },\n        {\n          \"dimension\": \"envy\",\n          \"quote_text\": \"\",\n          \"confidence\": 1.0,\n          \"context_type\": \"absence\"\n        },\n        {\n          \"dimension\": \"compassion\",\n          \"quote_text\": \"I had the honor of calling Senator Barack Obama to congratulate him - please - to congratulate him on being elected the next president of the country that we both love. In a contest as long and difficult as this campaign has been, his success alone commands my respect for his ability and perseverance. But that he managed to do so by inspiring the hopes of so many millions of Americans... is something I deeply admire and commend him for achieving.\",\n          \"confidence\": 1.0,\n          \"context_type\": \"explicit statement\"\n        },\n        {\n          \"dimension\": \"enmity\",\n          \"quote_text\": \"Senator Obama and I have had and argued our differences, and he has prevailed. No doubt many of those differences remain.\",\n          \"confidence\": 0.9,\n          \"context_type\": \"acknowledgement with de-escalation\"\n        },\n        {\n          \"dimension\": \"amity\",\n          \"quote_text\": \"I urge all Americans - I urge all Americans who supported me to join me in not just congratulating him, but offering our next president our good will and earnest effort to find ways to come together, to find the necessary compromises to bridge our differences\",\n          \"confidence\": 1.0,\n          \"context_type\": \"direct appeal\"\n        },\n        {\n          \"dimension\": \"fragmentative_goals\",\n          \"quote_text\": \"\",\n          \"confidence\": 1.0,\n          \"context_type\": \"absence\"\n        },\n        {\n          \"dimension\": \"cohesive_goals\",\n          \"quote_text\": \"find ways to come together, to find the necessary compromises to bridge our differences and help restore our prosperity, defend our security in a dangerous world, and leave our children and grandchildren a stronger, better country than we inherited.\",\n          \"confidence\": 1.0,\n          \"context_type\": \"explicit statement of purpose\"\n        }\n      ]\n    }\n  ]\n}\n<<<END_DISCERNUS_ANALYSIS_JSON_v6>>>",
          "evidence_hash": "3eac5bb300a087c7b42107aa7d165b6df7d4349a823a1c2b4a8306ebd532bc04",
          "execution_metadata": {
            "start_time": "2025-08-27T22:03:12.218852+00:00",
            "end_time": "2025-08-27T22:03:34.848721+00:00",
            "duration_seconds": 22.629849
          },
          "input_artifacts": {
            "framework_hash": "77e927d6773a3131ec6b0fa5ef666cbcd957859357ebe6ae80efaeb7be557b12",
            "document_hashes": [
              "ff9b26f20ad6dfa10cbf8ce4b7353fddab5e7cce5879e6b4603b8af60d0a9e35"
            ],
            "num_documents": 1
          },
          "provenance": {
            "security_boundary": {
              "experiment_name": "simple_test_cff",
              "experiment_root": "/Volumes/code/discernus/projects/simple_test_cff",
              "boundary_type": "filesystem",
              "security_level": "experiment_scoped"
            },
            "audit_session_id": "20250827T220312Z_b96689d0"
          }
        },
        "cached": true
      },
      {
        "analysis_id": "analysis_f7e930e9f2a2",
        "result_hash": "ac9368409134eb38b6940b34903d10ec258cff0ef009394ce3fbae7d8b587d9a",
        "result_content": {
          "analysis_id": "analysis_f7e930e9f2a2",
          "agent_name": "EnhancedAnalysisAgent",
          "agent_version": "enhanced_v2.1_raw_output",
          "experiment_name": "simple_test",
          "model_used": "vertex_ai/gemini-2.5-flash",
          "raw_analysis_response": "<<<DISCERNUS_ANALYSIS_JSON_v6>>>\n{\n  \"analysis_metadata\": {\n    \"framework_name\": \"cohesive_flourishing_framework\",\n    \"framework_version\": \"10.2\",\n    \"analyst_confidence\": 0.95,\n    \"analysis_notes\": \"The speech strongly emphasizes 'us vs. them' narratives, particularly concerning constitutional interpretation and immigration. It relies heavily on fear-mongering and adversarial language. There is a near-complete absence of positive, unifying, or hopeful rhetoric.\"\n  },\n  \"document_analyses\": [\n    {\n      \"document_id\": \"{artifact_id}\",\n      \"document_name\": \"steve_king_2017_house_floor.txt\",\n      \"dimensional_scores\": {\n        \"tribal_dominance\": {\n          \"raw_score\": 0.9,\n          \"salience\": 0.9,\n          \"confidence\": 0.95\n        },\n        \"individual_dignity\": {\n          \"raw_score\": 0.0,\n          \"salience\": 0.0,\n          \"confidence\": 0.95\n        },\n        \"fear\": {\n          \"raw_score\": 0.95,\n          \"salience\": 1.0,\n          \"confidence\": 0.95\n        },\n        \"hope\": {\n          \"raw_score\": 0.05,\n          \"salience\": 0.05,\n          \"confidence\": 0.9\n        },\n        \"envy\": {\n          \"raw_score\": 0.7,\n          \"salience\": 0.6,\n          \"confidence\": 0.9\n        },\n        \"compassion\": {\n          \"raw_score\": 0.0,\n          \"salience\": 0.0,\n          \"confidence\": 0.95\n        },\n        \"enmity\": {\n          \"raw_score\": 0.9,\n          \"salience\": 0.95,\n          \"confidence\": 0.95\n        },\n        \"amity\": {\n          \"raw_score\": 0.05,\n          \"salience\": 0.05,\n          \"confidence\": 0.9\n        },\n        \"fragmentative_goals\": {\n          \"raw_score\": 0.9,\n          \"salience\": 0.9,\n          \"confidence\": 0.95\n        },\n        \"cohesive_goals\": {\n          \"raw_score\": 0.0,\n          \"salience\": 0.0,\n          \"confidence\": 0.95\n        }\n      },\n      \"evidence\": [\n        {\n          \"dimension\": \"tribal_dominance\",\n          \"quote_text\": \"This is another life loss to an, an illegal criminal alien who was unlawfully present in America, who had no business to be here, one who had been encountered by law enforcement officers in the past, one whom I believe ICE declined, uh, to pick up and place into removal proceedings.\",\n          \"confidence\": 0.95,\n          \"context_type\": \"rhetorical argument\"\n        },\n        {\n          \"dimension\": \"individual_dignity\",\n          \"quote_text\": \"\",\n          \"confidence\": 0.0,\n          \"context_type\": \"absent\"\n        },\n        {\n          \"dimension\": \"fear\",\n          \"quote_text\": \"And it's costing, it's costing in the end thousands of lives in America. And the sad, sad story told by Laura Wilkerson yesterday that she has the courage and the heart to come here and share her story with us and to place that awful, brutal, ghastly memory again into her mind's eye and pour that forth into the Congressional Record so that some of us, some of us will soak that up and be mobilized to do something, something more to resist the President's policy of amnesty, de facto amnesty, amnesty by executive edict, that has been part and parcel of the Obama policy since the beginning of his time here in office. And it's been getting worse and worse every month.\",\n          \"confidence\": 0.95,\n          \"context_type\": \"narrative example\"\n        },\n        {\n          \"dimension\": \"hope\",\n          \"quote_text\": \"We must nominate and elect a president of the United States who will make those appointments to the Supreme Court who believe the Constitution means what it says.\",\n          \"confidence\": 0.8,\n          \"context_type\": \"call to action\"\n        },\n        {\n          \"dimension\": \"envy\",\n          \"quote_text\": \"This President has, has released, his administration has released over 30,000 criminals, criminal aliens onto the streets of America. And of those that they released, there have been at least 124 of them who have been charged with homicide for 135 murders.\",\n          \"confidence\": 0.9,\n          \"context_type\": \"consequence claim\"\n        },\n        {\n          \"dimension\": \"compassion\",\n          \"quote_text\": \"\",\n          \"confidence\": 0.0,\n          \"context_type\": \"absent\"\n        },\n        {\n          \"dimension\": \"enmity\",\n          \"quote_text\": \"And now this court has twisted it into a command that there's not a difference between a man and a woman when it comes to joining them together in matrimony. Well, there is a difference.\",\n          \"confidence\": 0.95,\n          \"context_type\": \"criticism of institutions\"\n        },\n        {\n          \"dimension\": \"amity\",\n          \"quote_text\": \"\",\n          \"confidence\": 0.0,\n          \"context_type\": \"absent\"\n        },\n        {\n          \"dimension\": \"fragmentative_goals\",\n          \"quote_text\": \"Send these people into prison. And when they're done, send them back to the country that they can live in legally for the rest of their lives if they don't stay in our prisons for the rest of their lives.\",\n          \"confidence\": 0.95,\n          \"context_type\": \"policy recommendation\"\n        },\n        {\n          \"dimension\": \"cohesive_goals\",\n          \"quote_text\": \"\",\n          \"confidence\": 0.0,\n          \"context_type\": \"absent\"\n        }\n      ]\n    }\n  ]\n}\n<<<END_DISCERNUS_ANALYSIS_JSON_v6>>>",
          "evidence_hash": "d8c1d665e441ff92b7459fa82cbd930549cc62a2f08e797592517c5bfe4221d6",
          "execution_metadata": {
            "start_time": "2025-08-27T22:03:34.850286+00:00",
            "end_time": "2025-08-27T22:03:56.896664+00:00",
            "duration_seconds": 22.046352
          },
          "input_artifacts": {
            "framework_hash": "77e927d6773a3131ec6b0fa5ef666cbcd957859357ebe6ae80efaeb7be557b12",
            "document_hashes": [
              "738780d93cc3c43b7b2e292a7fd0aa9f7e438f7ad2555be4ce6bfc20d9efda82"
            ],
            "num_documents": 1
          },
          "provenance": {
            "security_boundary": {
              "experiment_name": "simple_test_cff",
              "experiment_root": "/Volumes/code/discernus/projects/simple_test_cff",
              "boundary_type": "filesystem",
              "security_level": "experiment_scoped"
            },
            "audit_session_id": "20250827T220312Z_b96689d0"
          }
        },
        "cached": true
      },
      {
        "analysis_id": "analysis_dcc16de9a2ae",
        "result_hash": "c0e9a57a5dbab970e3ff7c2a5632ecce2d0fff4ec42d594e0f1fdcc31b65c667",
        "result_content": {
          "analysis_id": "analysis_dcc16de9a2ae",
          "agent_name": "EnhancedAnalysisAgent",
          "agent_version": "enhanced_v2.1_raw_output",
          "experiment_name": "simple_test",
          "model_used": "vertex_ai/gemini-2.5-flash",
          "raw_analysis_response": "```\n<<<DISCERNUS_ANALYSIS_JSON_v6>>>\n{\n  \"analysis_metadata\": {\n    \"framework_name\": \"cohesive_flourishing_framework\",\n    \"framework_version\": \"10.2\",\n    \"analyst_confidence\": 0.95,\n    \"analysis_notes\": \"Analysis of a political speech focusing on economic inequality and systemic critique. Strong emphasis on 'us vs. them' framing and adversarial goals.\"\n  },\n  \"document_analyses\": [\n    {\n      \"document_id\": \"{artifact_id}\",\n      \"document_name\": \"bernie_sanders_2025_fighting_oligarchy.txt\",\n      \"dimensional_scores\": {\n        \"tribal_dominance\": {\n          \"raw_score\": 0.8,\n          \"salience\": 0.9,\n          \"confidence\": 0.9\n        },\n        \"individual_dignity\": {\n          \"raw_score\": 0.1,\n          \"salience\": 0.1,\n          \"confidence\": 0.8\n        },\n        \"fear\": {\n          \"raw_score\": 0.7,\n          \"salience\": 0.7,\n          \"confidence\": 0.9\n        },\n        \"hope\": {\n          \"raw_score\": 0.6,\n          \"salience\": 0.6,\n          \"confidence\": 0.9\n        },\n        \"envy\": {\n          \"raw_score\": 0.9,\n          \"salience\": 0.85,\n          \"confidence\": 0.9\n        },\n        \"compassion\": {\n          \"raw_score\": 0.0,\n          \"salience\": 0.0,\n          \"confidence\": 0.95\n        },\n        \"enmity\": {\n          \"raw_score\": 0.9,\n          \"salience\": 0.9,\n          \"confidence\": 0.95\n        },\n        \"amity\": {\n          \"raw_score\": 0.4,\n          \"salience\": 0.4,\n          \"confidence\": 0.8\n        },\n        \"fragmentative_goals\": {\n          \"raw_score\": 0.8,\n          \"salience\": 0.8,\n          \"confidence\": 0.9\n        },\n        \"cohesive_goals\": {\n          \"raw_score\": 0.6,\n          \"salience\": 0.6,\n          \"confidence\": 0.9\n        }\n      },\n      \"evidence\": [\n        {\n          \"dimension\": \"tribal_dominance\",\n          \"quote_text\": \"The American people are outraged at what's going on, and the American people are saying loud and clear, \\\"We will not accept an oligarchic form of society. We will not accept the richest guy in the world running all over Washington...\\\"\",\n          \"confidence\": 0.95,\n          \"context_type\": \"core_argument\"\n        },\n        {\n          \"dimension\": \"individual_dignity\",\n          \"quote_text\": \"\",\n          \"confidence\": 0.7,\n          \"context_type\": \"not_present\"\n        },\n        {\n          \"dimension\": \"fear\",\n          \"quote_text\": \"But I will tell you this, in the midst of all of these addictions, the worst and most dangerous addiction we have is the greed of the oligarchs.\",\n          \"confidence\": 0.9,\n          \"context_type\": \"thematic_summary\"\n        },\n        {\n          \"dimension\": \"hope\",\n          \"quote_text\": \"I have every reason to believe deeply in my heart that not only will we defeat Trumpism, but we can create the kind of nation that we deserve.\",\n          \"confidence\": 0.9,\n          \"context_type\": \"call_to_action\"\n        },\n        {\n          \"dimension\": \"envy\",\n          \"quote_text\": \"Today you have more concentration of ownership in America than we have ever had in the history of this country in sector after sector... small number of extraordinarily large corporations who charge us outrageous prices for the products that we have to buy.\",\n          \"confidence\": 0.95,\n          \"context_type\": \"core_argument\"\n        },\n        {\n          \"dimension\": \"compassion\",\n          \"quote_text\": \"\",\n          \"confidence\": 0.95,\n          \"context_type\": \"not_present\"\n        },\n        {\n          \"dimension\": \"enmity\",\n          \"quote_text\": \"These guys...they are not nice guys. I know on TV they come across...And in your community, they make a donation to the hospital or the Boys & Girls Clubs or the food shelf. They're just very nice. But they're not.\",\n          \"confidence\": 0.95,\n          \"context_type\": \"character_attack\"\n        },\n        {\n          \"dimension\": \"amity\",\n          \"quote_text\": \"So if we stand together, are strong, are disciplined, are smart, I have every reason to believe deeply in my heart that not only will we defeat Trumpism, but we can create the kind of nation that we deserve.\",\n          \"confidence\": 0.8,\n          \"context_type\": \"call_to_action\"\n        },\n        {\n          \"dimension\": \"fragmentative_goals\",\n          \"quote_text\": \"They are prepared to destroy Social Security, Medicaid, Medicare, the Veterans Administration in order to make themselves even richer.\",\n          \"confidence\": 0.9,\n          \"context_type\": \"stated_objective\"\n        },\n        {\n          \"dimension\": \"cohesive_goals\",\n          \"quote_text\": \"we can create the kind of nation that we deserve.\",\n          \"confidence\": 0.9,\n          \"context_type\": \"vision_statement\"\n        }\n      ]\n    }\n  ]\n}\n<<<END_DISCERNUS_ANALYSIS_JSON_v6>>>",
          "evidence_hash": "592ce030ec48ffd8d9f7aeb6dc04736e344ed78818114777141605d9b96f74f4",
          "execution_metadata": {
            "start_time": "2025-08-28T00:27:16.787212+00:00",
            "end_time": "2025-08-28T00:27:29.984215+00:00",
            "duration_seconds": 13.196991
          },
          "input_artifacts": {
            "framework_hash": "77e927d6773a3131ec6b0fa5ef666cbcd957859357ebe6ae80efaeb7be557b12",
            "document_hashes": [
              "261b893a384411f76907e78e7997860cd9be5d959334a6b9ae1386ea1ba6cbdd"
            ],
            "num_documents": 1
          },
          "provenance": {
            "security_boundary": {
              "experiment_name": "simple_test_cff",
              "experiment_root": "/Volumes/code/discernus/projects/simple_test_cff",
              "boundary_type": "filesystem",
              "security_level": "experiment_scoped"
            },
            "audit_session_id": "20250828T002716Z_7e68c80f"
          }
        },
        "cached": true
      },
      {
        "analysis_id": "analysis_c61b5bb2e7f8",
        "result_hash": "660f8e88e5b973626eace3dfe470599d9b649fd3d6a46625ddacfba8325655ef",
        "result_content": {
          "analysis_id": "analysis_c61b5bb2e7f8",
          "agent_name": "EnhancedAnalysisAgent",
          "agent_version": "enhanced_v2.1_raw_output",
          "experiment_name": "simple_test",
          "model_used": "vertex_ai/gemini-2.5-flash",
          "raw_analysis_response": "<<<DISCERNUS_ANALYSIS_JSON_v6>>>\n{\n  \"analysis_metadata\": {\n    \"framework_name\": \"cohesive_flourishing_framework\",\n    \"framework_version\": \"10.2\",\n    \"analyst_confidence\": 0.9,\n    \"analysis_notes\": \"Analysis of a political speech by AOC from the 2020s, focusing on economic policy and social commentary. The speech frames a clear 'us vs. them' narrative (working class/people vs. oligarchy/wealthy/certain politicians) while simultaneously emphasizing internal unity and inclusive solidarity within the 'us' group. Strong emotional appeals, particularly fear of current conditions and hope for a better future through collective action, are present. The success of the 'other' is consistently delegitimized as stolen or ill-gotten.\"\n  },\n  \"document_analyses\": [\n    {\n      \"document_id\": \"{artifact_id}\",\n      \"document_name\": \"alexandria_ocasio_cortez_2025_fighting_oligarchy.txt\",\n      \"dimensional_scores\": {\n        \"tribal_dominance\": {\n          \"raw_score\": 0.7,\n          \"salience\": 0.8,\n          \"confidence\": 0.9\n        },\n        \"individual_dignity\": {\n          \"raw_score\": 0.6,\n          \"salience\": 0.7,\n          \"confidence\": 0.9\n        },\n        \"fear\": {\n          \"raw_score\": 0.7,\n          \"salience\": 0.8,\n          \"confidence\": 0.9\n        },\n        \"hope\": {\n          \"raw_score\": 0.6,\n          \"salience\": 0.7,\n          \"confidence\": 0.9\n        },\n        \"envy\": {\n          \"raw_score\": 0.9,\n          \"salience\": 0.9,\n          \"confidence\": 0.95\n        },\n        \"compassion\": {\n          \"raw_score\": 0.0,\n          \"salience\": 0.0,\n          \"confidence\": 0.95\n        },\n        \"enmity\": {\n          \"raw_score\": 0.8,\n          \"salience\": 0.8,\n          \"confidence\": 0.9\n        },\n        \"amity\": {\n          \"raw_score\": 0.7,\n          \"salience\": 0.7,\n          \"confidence\": 0.9\n        },\n        \"fragmentative_goals\": {\n          \"raw_score\": 0.6,\n          \"salience\": 0.6,\n          \"confidence\": 0.9\n        },\n        \"cohesive_goals\": {\n          \"raw_score\": 0.7,\n          \"salience\": 0.7,\n          \"confidence\": 0.9\n        }\n      },\n      \"evidence\": [\n        {\n          \"dimension\": \"tribal_dominance\",\n          \"quote_text\": \"We are witnessing an oligarchy in America. And that is when those with the most economic, political, and technological power destroy the public good to enrich themselves while millions of Americans pay the price.\",\n          \"confidence\": 0.9,\n          \"context_type\": \"direct_statement\"\n        },\n        {\n          \"dimension\": \"tribal_dominance\",\n          \"quote_text\": \"The same billionaires are taking a wrecking ball to our country and they derive their power from dividing working people apart. They specialize in getting us to turn on one another and they get us to turn on one another along lines of left and right, race and gender, creed and culture.\",\n          \"confidence\": 0.85,\n          \"context_type\": \"adversarial_framing\"\n        },\n        {\n          \"dimension\": \"tribal_dominance\",\n          \"quote_text\": \"So I hope that you see this movement is not about partisan labels or purity tests, but about class solidarity.\",\n          \"confidence\": 0.9,\n          \"context_type\": \"redefinition_of_group_identity\"\n        },\n        {\n          \"dimension\": \"individual_dignity\",\n          \"quote_text\": \"No matter if you know all the right words to say, no matter your race, religion, gender identity, or status, no matter if you disagree with me on a couple of things. If you are willing to fight for someone you don't know, you are welcome here.\",\n          \"confidence\": 0.95,\n          \"context_type\": \"inclusive_appeal\"\n        },\n        {\n          \"dimension\": \"individual_dignity\",\n          \"quote_text\": \"If you are willing to fight for working people regardless of who they are, how they identify, or where they come from, you are welcome here.\",\n          \"confidence\": 0.9,\n          \"context_type\": \"inclusive_appeal\"\n        },\n        {\n          \"dimension\": \"individual_dignity\",\n          \"quote_text\": \"Our lives deserve dignity and our work deserves respect.\",\n          \"confidence\": 0.9,\n          \"context_type\": \"universal_worth_statement\"\n        },\n        {\n          \"dimension\": \"fear\",\n          \"quote_text\": \"We are witnessing an oligarchy in America. And that is when those with the most economic, political, and technological power destroy the public good to enrich themselves while millions of Americans pay the price.\",\n          \"confidence\": 0.9,\n          \"context_type\": \"crisis_framing\"\n        },\n        {\n          \"dimension\": \"fear\",\n          \"quote_text\": \"a politics that involves lying to and screwing over working and middle class Americans so that they can steal from our healthcare, Social Security, and veterans' benefits to pay for tax cuts for the wealthiest and bailouts for their crypto billionaire friends.\",\n          \"confidence\": 0.9,\n          \"context_type\": \"threat_assessment\"\n        },\n        {\n          \"dimension\": \"fear\",\n          \"quote_text\": \"I lost my dad to cancer as a kid and had to see my mom open hospital bills in the days after. And I don't want us to live like this anymore, Greeley.\",\n          \"confidence\": 0.85,\n          \"context_type\": \"personal_vulnerability\"\n        },\n        {\n          \"dimension\": \"hope\",\n          \"quote_text\": \"If you are willing to fight for someone you don't know, you are welcome here.\",\n          \"confidence\": 0.85,\n          \"context_type\": \"call_to_action\"\n        },\n        {\n          \"dimension\": \"hope\",\n          \"quote_text\": \"in this house, we stand together, we know that, that it's our only choice because we know that without exception, if we stand together, it is the only way that we can win.\",\n          \"confidence\": 0.9,\n          \"context_type\": \"vision_of_victory\"\n        },\n        {\n          \"dimension\": \"hope\",\n          \"quote_text\": \"Our lives deserve dignity and our work deserves respect.\",\n          \"confidence\": 0.8,\n          \"context_type\": \"optimistic_future\"\n        },\n        {\n          \"dimension\": \"envy\",\n          \"quote_text\": \"a politics that involves lying to and screwing over working and middle class Americans so that they can steal from our healthcare, Social Security, and veterans' benefits to pay for tax cuts for the wealthiest and bailouts for their crypto billionaire friends.\",\n          \"confidence\": 0.95,\n          \"context_type\": \"delegitimization_of_wealth\"\n        },\n        {\n          \"dimension\": \"envy\",\n          \"quote_text\": \"They aren't working for these billions. They're stealing them. They're stealing them. They're stealing them from you and you and me.\",\n          \"confidence\": 0.95,\n          \"context_type\": \"zero_sum_framing\"\n        },\n        {\n          \"dimension\": \"envy\",\n          \"quote_text\": \"Elon Musk and Donald Trump are selling off our country for parts to the wealthiest people in the world for a kickback.\",\n          \"confidence\": 0.9,\n          \"context_type\": \"illegitimate_gain_accusation\"\n        },\n        {\n          \"dimension\": \"compassion\",\n          \"quote_text\": \"\",\n          \"confidence\": 0.0,\n          \"context_type\": \"absence_of_evidence\"\n        },\n        {\n          \"dimension\": \"enmity\",\n          \"quote_text\": \"those with the most economic, political, and technological power destroy the public good to enrich themselves while millions of Americans pay the price.\",\n          \"confidence\": 0.9,\n          \"context_type\": \"adversarial_framing\"\n        },\n        {\n          \"dimension\": \"enmity\",\n          \"quote_text\": \"The same billionaires are taking a wrecking ball to our country\",\n          \"confidence\": 0.85,\n          \"context_type\": \"hostile_action_description\"\n        },\n        {\n          \"dimension\": \"enmity\",\n          \"quote_text\": \"We need to come together and spend every day between now and election day working to educate our neighbors, and give Evans and Boebert the boot, and replace them with a brawling Democrat who will stand for Colorado.\",\n          \"confidence\": 0.8,\n          \"context_type\": \"direct_adversarial_action\"\n        },\n        {\n          \"dimension\": \"amity\",\n          \"quote_text\": \"We need to come together and spend every day between now and election day working to educate our neighbors\",\n          \"confidence\": 0.85,\n          \"context_type\": \"unity_appeal\"\n        },\n        {\n          \"dimension\": \"amity\",\n          \"quote_text\": \"in this house, we stand together, we know that, that it's our only choice because we know that without exception, if we stand together, it is the only way that we can win.\",\n          \"confidence\": 0.9,\n          \"context_type\": \"cooperative_framing\"\n        },\n        {\n          \"dimension\": \"amity\",\n          \"quote_text\": \"So I hope that you see this movement is not about partisan labels or purity tests, but about class solidarity.\",\n          \"confidence\": 0.9,\n          \"context_type\": \"unity_redefinition\"\n        },\n        {\n          \"dimension\": \"fragmentative_goals\",\n          \"quote_text\": \"those with the most economic, political, and technological power destroy the public good to enrich themselves\",\n          \"confidence\": 0.8,\n          \"context_type\": \"description_of_opponent_goals\"\n        },\n        {\n          \"dimension\": \"fragmentative_goals\",\n          \"quote_text\": \"Donald Trump... his answer is an America that operates on the principle of every man for himself, divide and conquer.\",\n          \"confidence\": 0.85,\n          \"context_type\": \"stated_objective_of_opponent\"\n        },\n        {\n          \"dimension\": \"fragmentative_goals\",\n          \"quote_text\": \"We need to come together and spend every day between now and election day working to educate our neighbors, and give Evans and Boebert the boot, and replace them with a brawling Democrat who will stand for Colorado.\",\n          \"confidence\": 0.75,\n          \"context_type\": \"specific_zero_sum_objective\"\n        },\n        {\n          \"dimension\": \"cohesive_goals\",\n          \"quote_text\": \"I don't want us to live like this anymore\",\n          \"confidence\": 0.7,\n          \"context_type\": \"implied_positive_future\"\n        },\n        {\n          \"dimension\": \"cohesive_goals\",\n          \"quote_text\": \"So I hope that you see this movement is not about partisan labels or purity tests, but about class solidarity.\",\n          \"confidence\": 0.9,\n          \"context_type\": \"integrative_objective\"\n        },\n        {\n          \"dimension\": \"cohesive_goals\",\n          \"quote_text\": \"in this house, we stand together, we know that, that it's our only choice because we know that without exception, if we stand together, it is the only way that we can win.\",\n          \"confidence\": 0.9,\n          \"context_type\": \"collective_action_goal\"\n        }\n      ]\n    }\n  ]\n}\n<<<END_DISCERNUS_ANALYSIS_JSON_v6>>>",
          "evidence_hash": "75a004bac0f5d605cbc042a428b9561bc186e6ff87602b18d6c76364afdae4e0",
          "execution_metadata": {
            "start_time": "2025-08-28T00:27:29.986045+00:00",
            "end_time": "2025-08-28T00:28:04.962843+00:00",
            "duration_seconds": 34.976783
          },
          "input_artifacts": {
            "framework_hash": "77e927d6773a3131ec6b0fa5ef666cbcd957859357ebe6ae80efaeb7be557b12",
            "document_hashes": [
              "1121e4ae679ce6e6c08c6d2d9aa4ce0c6e5040e8b13405fcfd9ea725b8ad5ff6"
            ],
            "num_documents": 1
          },
          "provenance": {
            "security_boundary": {
              "experiment_name": "simple_test_cff",
              "experiment_root": "/Volumes/code/discernus/projects/simple_test_cff",
              "boundary_type": "filesystem",
              "security_level": "experiment_scoped"
            },
            "audit_session_id": "20250828T002716Z_7e68c80f"
          }
        },
        "cached": true
      }
    ],
    "columns_added": []
  },
  "status": "success_with_data",
  "validation_passed": true
}