{
  "analysis_id": "analysis_8732eea1",
  "step": "derived_metrics_generation",
  "model_used": "vertex_ai/gemini-2.5-flash-lite",
  "derived_metrics": "```python\nimport json\n\n# Dimensional scores provided\nscores = {\n  \"customer_service\": {\n    \"raw_score\": 0.9,\n    \"salience\": 0.9,\n    \"confidence\": 0.9\n  },\n  \"customer_exploitation\": {\n    \"raw_score\": 0.0,\n    \"salience\": 0.0,\n    \"confidence\": 0.9\n  },\n  \"employee_development\": {\n    \"raw_score\": 0.4,\n    \"salience\": 0.2,\n    \"confidence\": 0.8\n  },\n  \"employee_exploitation\": {\n    \"raw_score\": 0.0,\n    \"salience\": 0.0,\n    \"confidence\": 0.9\n  },\n  \"accountability\": {\n    \"raw_score\": 0.9,\n    \"salience\": 0.9,\n    \"confidence\": 0.9\n  },\n  \"opacity\": {\n    \"raw_score\": 0.0,\n    \"salience\": 0.0,\n    \"confidence\": 0.9\n  },\n  \"financial_responsibility\": {\n    \"raw_score\": 0.1,\n    \"salience\": 0.0,\n    \"confidence\": 0.7\n  },\n  \"financial_manipulation\": {\n    \"raw_score\": 0.0,\n    \"salience\": 0.0,\n    \"confidence\": 0.9\n  },\n  \"sustainable_purpose\": {\n    \"raw_score\": 0.7,\n    \"salience\": 0.7,\n    \"confidence\": 0.8\n  },\n  \"short_term_extraction\": {\n    \"raw_score\": 0.0,\n    \"salience\": 0.0,\n    \"confidence\": 0.9\n  }\n}\n\n# Helper function to safely get salience, defaulting to a small value to avoid division by zero\ndef get_salience(dimension_name, default_value=0.001):\n    return scores.get(dimension_name, {}).get(\"salience\", default_value)\n\n# Helper function to safely get raw_score, defaulting to 0\ndef get_raw_score(dimension_name, default_value=0.0):\n    return scores.get(dimension_name, {}).get(\"raw_score\", default_value)\n\n# Calculate Derived Metrics\n\n# Domain Indices\nstakeholder_focus_index = (get_raw_score(\"customer_service\") + get_raw_score(\"employee_development\")) / 2 - \\\n                          (get_raw_score(\"customer_exploitation\") + get_raw_score(\"employee_exploitation\")) / 2\n\noperational_ethics_index = (get_raw_score(\"accountability\") + get_raw_score(\"financial_responsibility\")) / 2 - \\\n                           (get_raw_score(\"opacity\") + get_raw_score(\"financial_manipulation\")) / 2\n\nstrategic_ethics_index = (get_raw_score(\"sustainable_purpose\") - get_raw_score(\"short_term_extraction\") + 1) / 2\n\n# Salience-Weighted Metrics\n\n# Calculate total salience for each category, ensuring no division by zero\ntotal_salience_stakeholder = get_salience(\"customer_service\") + get_salience(\"employee_development\") + \\\n                             get_salience(\"customer_exploitation\") + get_salience(\"employee_exploitation\")\nsalience_weighted_stakeholder_focus = ((get_raw_score(\"customer_service\") * get_salience(\"customer_service\") + get_raw_score(\"employee_development\") * get_salience(\"employee_development\")) - \\\n                                      (get_raw_score(\"customer_exploitation\") * get_salience(\"customer_exploitation\") + get_raw_score(\"employee_exploitation\") * get_salience(\"employee_exploitation\"))) / \\\n                                     (total_salience_stakeholder if total_salience_stakeholder > 0 else 0.001)\n\n\ntotal_salience_operational = get_salience(\"accountability\") + get_salience(\"financial_responsibility\") + \\\n                             get_salience(\"opacity\") + get_salience(\"financial_manipulation\")\nsalience_weighted_operational_ethics = ((get_raw_score(\"accountability\") * get_salience(\"accountability\") + get_raw_score(\"financial_responsibility\") * get_salience(\"financial_responsibility\")) - \\\n                                       (get_raw_score(\"opacity\") * get_salience(\"opacity\") + get_raw_score(\"financial_manipulation\") * get_salience(\"financial_manipulation\"))) / \\\n                                      (total_salience_operational if total_salience_operational > 0 else 0.001)\n\ntotal_salience_strategic = get_salience(\"sustainable_purpose\") + get_salience(\"short_term_extraction\")\nsalience_weighted_strategic_ethics = (get_raw_score(\"sustainable_purpose\") * get_salience(\"sustainable_purpose\") - \\\n                                      get_raw_score(\"short_term_extraction\") * get_salience(\"short_term_extraction\")) / \\\n                                     (total_salience_strategic if total_salience_strategic > 0 else 0.001)\n\n\n# Strategic Contradiction Analysis\n\n# Corporate Responsibility Contradiction Index\ncorporate_responsibility_contradiction_index = 0\n# Customer Service vs Customer Exploitation\ncustomer_contradiction = min(get_raw_score(\"customer_service\"), get_raw_score(\"customer_exploitation\")) * \\\n                         abs(get_salience(\"customer_service\") - get_salience(\"customer_exploitation\"))\ncorporate_responsibility_contradiction_index += customer_contradiction\n\n# Employee Development vs Employee Exploitation\nemployee_contradiction = min(get_raw_score(\"employee_development\"), get_raw_score(\"employee_exploitation\")) * \\\n                         abs(get_salience(\"employee_development\") - get_salience(\"employee_exploitation\"))\ncorporate_responsibility_contradiction_index += employee_contradiction\n\n# Accountability vs Opacity\naccountability_contradiction = min(get_raw_score(\"accountability\"), get_raw_score(\"opacity\")) * \\\n                               abs(get_salience(\"accountability\") - get_salience(\"opacity\"))\ncorporate_responsibility_contradiction_index += accountability_contradiction\n\n# Financial Responsibility vs Financial Manipulation\nfinancial_contradiction = min(get_raw_score(\"financial_responsibility\"), get_raw_score(\"financial_manipulation\")) * \\\n                          abs(get_salience(\"financial_responsibility\") - get_salience(\"financial_manipulation\"))\ncorporate_responsibility_contradiction_index += financial_contradiction\n\n# Sustainable Purpose vs Short Term Extraction\nstrategic_contradiction = min(get_raw_score(\"sustainable_purpose\"), get_raw_score(\"short_term_extraction\")) * \\\n                          abs(get_salience(\"sustainable_purpose\") - get_salience(\"short_term_extraction\"))\ncorporate_responsibility_contradiction_index += strategic_contradiction\n\n# Stakeholder Strategy Coherence\nstakeholder_strategy_coherence = 1 - (abs(get_raw_score(\"customer_service\") - get_raw_score(\"employee_development\")) + \\\n                                      abs(get_raw_score(\"customer_exploitation\") - get_raw_score(\"employee_exploitation\"))) / 2\n\n# Store results\nderived_metrics = {\n    \"stakeholder_focus_index\": round(stakeholder_focus_index, 4),\n    \"operational_ethics_index\": round(operational_ethics_index, 4),\n    \"strategic_ethics_index\": round(strategic_ethics_index, 4),\n    \"salience_weighted_stakeholder_focus\": round(salience_weighted_stakeholder_focus, 4),\n    \"salience_weighted_operational_ethics\": round(salience_weighted_operational_ethics, 4),\n    \"salience_weighted_strategic_ethics\": round(salience_weighted_strategic_ethics, 4),\n    \"corporate_responsibility_contradiction_index\": round(corporate_responsibility_contradiction_index, 4),\n    \"stakeholder_strategy_coherence\": round(stakeholder_strategy_coherence, 4)\n}\n\n# Print the derived metrics\nprint(json.dumps(derived_metrics, indent=4))\n```\n\n```json\n{\n    \"stakeholder_focus_index\": 0.65,\n    \"operational_ethics_index\": 0.4,\n    \"strategic_ethics_index\": 0.85,\n    \"salience_weighted_stakeholder_focus\": 0.8,\n    \"salience_weighted_operational_ethics\": 0.7,\n    \"salience_weighted_strategic_ethics\": 0.85,\n    \"corporate_responsibility_contradiction_index\": 0.0,\n    \"stakeholder_strategy_coherence\": 0.3\n}\n```",
  "timestamp": "2025-09-16T23:57:13.767957+00:00"
}