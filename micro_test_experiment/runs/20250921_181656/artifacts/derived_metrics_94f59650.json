{
  "analysis_id": "analysis_v2_analysis_20250921_141656_1",
  "step": "derived_metrics",
  "model_used": "vertex_ai/gemini-2.5-flash-lite",
  "derived_metrics": "```python\nimport json\n\ndef calculate_derived_metrics(scores):\n  \"\"\"\n  Calculates derived sentiment metrics based on positive and negative sentiment scores.\n\n  Args:\n    scores (dict): A dictionary containing 'positive_sentiment' and 'negative_sentiment'\n                   as keys, with float values between 0.0 and 1.0.\n\n  Returns:\n    dict: A dictionary containing the calculated derived metrics: 'net_sentiment'\n          and 'sentiment_magnitude'.\n  \"\"\"\n\n  # --- Input Validation ---\n  if not isinstance(scores, dict):\n    raise TypeError(\"Input 'scores' must be a dictionary.\")\n  if 'positive_sentiment' not in scores or 'negative_sentiment' not in scores:\n    raise ValueError(\"Input 'scores' must contain 'positive_sentiment' and 'negative_sentiment' keys.\")\n\n  positive_sentiment = scores['positive_sentiment']\n  negative_sentiment = scores['negative_sentiment']\n\n  if not (0.0 <= positive_sentiment <= 1.0):\n    raise ValueError(\"'positive_sentiment' must be between 0.0 and 1.0.\")\n  if not (0.0 <= negative_sentiment <= 1.0):\n    raise ValueError(\"'negative_sentiment' must be between 0.0 and 1.0.\")\n\n  # --- Derived Metric Calculations ---\n\n  # Net Sentiment: Balance between positive and negative sentiment\n  # Formula: positive_sentiment - negative_sentiment\n  # Interpretation:\n  #   > 0: Net positive sentiment\n  #   = 0: Balanced sentiment\n  #   < 0: Net negative sentiment\n  net_sentiment = positive_sentiment - negative_sentiment\n\n  # Sentiment Magnitude: Average emotional intensity\n  # Formula: (positive_sentiment + negative_sentiment) / 2\n  # Interpretation:\n  #   > 0.5: High emotional intensity\n  #   0.25-0.5: Moderate emotional intensity\n  #   < 0.25: Low emotional intensity\n  sentiment_magnitude = (positive_sentiment + negative_sentiment) / 2.0\n\n  return {\n      \"net_sentiment\": net_sentiment,\n      \"sentiment_magnitude\": sentiment_magnitude\n  }\n\n# --- Provided Scores ---\n# This is the input data representing the raw sentiment scores.\ninput_scores = {\n  \"positive_sentiment\": 1.0,\n  \"negative_sentiment\": 0.0\n}\n\n# --- Execute Calculation ---\n# Call the function to calculate the derived metrics.\ncalculated_metrics = calculate_derived_metrics(input_scores)\n\n# --- Display Results ---\nprint(\"--- Input Scores ---\")\nprint(json.dumps(input_scores, indent=2))\nprint(\"\\n--- Calculated Derived Metrics ---\")\nprint(json.dumps(calculated_metrics, indent=2))\n\n# --- Interpretation of Results ---\nprint(\"\\n--- Interpretation ---\")\n\n# Net Sentiment Interpretation\nnet_sentiment_val = calculated_metrics['net_sentiment']\nif net_sentiment_val > 0:\n    net_sentiment_interpretation = \"Net positive sentiment. The text exhibits a stronger positive emotional tone.\"\nelif net_sentiment_val == 0:\n    net_sentiment_interpretation = \"Balanced sentiment. The positive and negative emotional tones are equal.\"\nelse:\n    net_sentiment_interpretation = \"Net negative sentiment. The text exhibits a stronger negative emotional tone.\"\nprint(f\"Net Sentiment ({net_sentiment_val:.2f}): {net_sentiment_interpretation}\")\n\n# Sentiment Magnitude Interpretation\nsentiment_magnitude_val = calculated_metrics['sentiment_magnitude']\nif sentiment_magnitude_val > 0.5:\n    sentiment_magnitude_interpretation = \"High emotional intensity. The text carries a strong overall emotional charge.\"\nelif 0.25 <= sentiment_magnitude_val <= 0.5:\n    sentiment_magnitude_interpretation = \"Moderate emotional intensity. The text has a noticeable but not overwhelming emotional charge.\"\nelse:\n    sentiment_magnitude_interpretation = \"Low emotional intensity. The text has a weak or negligible emotional charge.\"\nprint(f\"Sentiment Magnitude ({sentiment_magnitude_val:.2f}): {sentiment_magnitude_interpretation}\")\n```\n\n```text\n--- Input Scores ---\n{\n  \"positive_sentiment\": 1.0,\n  \"negative_sentiment\": 0.0\n}\n\n--- Calculated Derived Metrics ---\n{\n  \"net_sentiment\": 1.0,\n  \"sentiment_magnitude\": 0.5\n}\n\n--- Interpretation ---\nNet Sentiment (1.00): Net positive sentiment. The text exhibits a stronger positive emotional tone.\nSentiment Magnitude (0.50): Moderate emotional intensity. The text has a noticeable but not overwhelming emotional charge.\n```",
  "document_index": 1,
  "timestamp": "2025-09-21T18:17:36.098705+00:00"
}