{
  "analysis_id": "analysis_v2_analysis_20250921_152902_0",
  "step": "derived_metrics",
  "model_used": "vertex_ai/gemini-2.5-pro",
  "derived_metrics": "```python\nimport math\n\n# Provided dimensional scores\ndimensional_scores = {\n    \"tribal_dominance\": {\"raw_score\": 0.95, \"salience\": 0.9},  # Assuming salience is also provided or estimated\n    \"individual_dignity\": {\"raw_score\": 0.0, \"salience\": 0.1},\n    \"fear\": {\"raw_score\": 0.9, \"salience\": 0.85},\n    \"hope\": {\"raw_score\": 0.55, \"salience\": 0.7},\n    \"envy\": {\"raw_score\": 0.55, \"salience\": 0.6},\n    \"compersion\": {\"raw_score\": 0.0, \"salience\": 0.05},\n    \"enmity\": {\"raw_score\": 1.0, \"salience\": 0.95},\n    \"amity\": {\"raw_score\": 0.0, \"salience\": 0.1},\n    \"fragmentative_goals\": {\"raw_score\": 0.8, \"salience\": 0.85},\n    \"cohesive_goals\": {\"raw_score\": 0.9, \"salience\": 0.9}\n}\n\n# Define epsilon for division by zero prevention\nEPSILON = 0.001\n\n# --- Derived Metrics Calculation ---\n\n# 1. Tension Indices\n# These indices measure the rhetorical tension or contradiction between opposing dimensions.\n# Formula: min(Score_A, Score_B) * |Salience_A - Salience_B|\n\nidentity_tension = min(dimensional_scores[\"tribal_dominance\"][\"raw_score\"], dimensional_scores[\"individual_dignity\"][\"raw_score\"]) * \\\n                   abs(dimensional_scores[\"tribal_dominance\"][\"salience\"] - dimensional_scores[\"individual_dignity\"][\"salience\"])\n\nemotional_tension = min(dimensional_scores[\"fear\"][\"raw_score\"], dimensional_scores[\"hope\"][\"raw_score\"]) * \\\n                    abs(dimensional_scores[\"fear\"][\"salience\"] - dimensional_scores[\"hope\"][\"salience\"])\n\nsuccess_tension = min(dimensional_scores[\"envy\"][\"raw_score\"], dimensional_scores[\"compersion\"][\"raw_score\"]) * \\\n                  abs(dimensional_scores[\"envy\"][\"salience\"] - dimensional_scores[\"compersion\"][\"salience\"])\n\nrelational_tension = min(dimensional_scores[\"enmity\"][\"raw_score\"], dimensional_scores[\"amity\"][\"raw_score\"]) * \\\n                     abs(dimensional_scores[\"enmity\"][\"salience\"] - dimensional_scores[\"amity\"][\"salience\"])\n\ngoal_tension = min(dimensional_scores[\"fragmentative_goals\"][\"raw_score\"], dimensional_scores[\"cohesive_goals\"][\"raw_score\"]) * \\\n               abs(dimensional_scores[\"fragmentative_goals\"][\"salience\"] - dimensional_scores[\"cohesive_goals\"][\"salience\"])\n\n# 2. Strategic Contradiction Index\n# This index is the average of all tension indices, indicating overall rhetorical coherence.\n# Lower values mean more coherent messaging.\nstrategic_contradiction_index = (identity_tension + emotional_tension + success_tension + relational_tension + goal_tension) / 5\n\n# 3. Salience-Weighted Cohesion Indices\n# These indices use salience-weighted scores for each dimension to create composite measures.\n# The general form for a positive component is: score_positive * salience_positive\n# The general form for a negative component is: score_negative * salience_negative\n# The final index is (sum of positive components - sum of negative components) / (sum of all relevant saliences + epsilon)\n\n# Intermediate calculations for components\nemotional_cohesion_component = (dimensional_scores[\"hope\"][\"raw_score\"] * dimensional_scores[\"hope\"][\"salience\"]) - \\\n                               (dimensional_scores[\"fear\"][\"raw_score\"] * dimensional_scores[\"fear\"][\"salience\"])\n\nsuccess_cohesion_component = (dimensional_scores[\"compersion\"][\"raw_score\"] * dimensional_scores[\"compersion\"][\"salience\"]) - \\\n                             (dimensional_scores[\"envy\"][\"raw_score\"] * dimensional_scores[\"envy\"][\"salience\"])\n\nrelational_cohesion_component = (dimensional_scores[\"amity\"][\"raw_score\"] * dimensional_scores[\"amity\"][\"salience\"]) - \\\n                                (dimensional_scores[\"enmity\"][\"raw_score\"] * dimensional_scores[\"enmity\"][\"salience\"])\n\ngoal_cohesion_component = (dimensional_scores[\"cohesive_goals\"][\"raw_score\"] * dimensional_scores[\"cohesive_goals\"][\"salience\"]) - \\\n                          (dimensional_scores[\"fragmentative_goals\"][\"raw_score\"] * dimensional_scores[\"fragmentative_goals\"][\"salience\"])\n\nidentity_cohesion_component = (dimensional_scores[\"individual_dignity\"][\"raw_score\"] * dimensional_scores[\"individual_dignity\"][\"salience\"]) - \\\n                              (dimensional_scores[\"tribal_dominance\"][\"raw_score\"] * dimensional_scores[\"tribal_dominance\"][\"salience\"])\n\n# Total saliences for normalization\ndescriptive_salience_total = (dimensional_scores[\"hope\"][\"salience\"] + dimensional_scores[\"fear\"][\"salience\"] +\n                              dimensional_scores[\"compersion\"][\"salience\"] + dimensional_scores[\"envy\"][\"salience\"] +\n                              dimensional_scores[\"amity\"][\"salience\"] + dimensional_scores[\"enmity\"][\"salience\"])\n\nmotivational_salience_total = descriptive_salience_total + \\\n                              dimensional_scores[\"cohesive_goals\"][\"salience\"] + dimensional_scores[\"fragmentative_goals\"][\"salience\"]\n\nfull_salience_total = motivational_salience_total + \\\n                      dimensional_scores[\"individual_dignity\"][\"salience\"] + dimensional_scores[\"tribal_dominance\"][\"salience\"]\n\n# Descriptive Cohesion Index\n# Focuses on immediate emotional and relational climate.\n# Positive values: hope, compersion, amity emphasis\n# Negative values: fear, envy, enmity emphasis\ndescriptive_cohesion_index = (emotional_cohesion_component + success_cohesion_component + relational_cohesion_component) / \\\n                             (descriptive_salience_total + EPSILON)\n\n# Motivational Cohesion Index\n# Assesses likely behavioral consequences based on hope/fear, compersion/envy, amity/enmity, and goal orientation.\n# Positive values: cooperative, abundance-oriented behaviors\n# Negative values: competitive, zero-sum behaviors\nmotivational_cohesion_index = (emotional_cohesion_component + success_cohesion_component + relational_cohesion_component + goal_cohesion_component) / \\\n                              (motivational_salience_total + EPSILON)\n\n# Full Cohesion Index\n# Comprehensive evaluation of democratic health and social cohesion, including identity.\n# Positive values: discourse supporting democratic institutions and social solidarity\n# Negative values: discourse undermining democratic health and promoting fragmentation\nfull_cohesion_index = (identity_cohesion_component + emotional_cohesion_component + success_cohesion_component + relational_cohesion_component + goal_cohesion_component) / \\\n                      (full_salience_total + EPSILON)\n\n\n# --- Store and Display Results ---\nderived_metrics_results = {\n    \"Tension Indices\": {\n        \"identity_tension\": identity_tension,\n        \"emotional_tension\": emotional_tension,\n        \"success_tension\": success_tension,\n        \"relational_tension\": relational_tension,\n        \"goal_tension\": goal_tension,\n    },\n    \"Strategic Contradiction Index\": strategic_contradiction_index,\n    \"Cohesion Indices\": {\n        \"descriptive_cohesion_index\": descriptive_cohesion_index,\n        \"motivational_cohesion_index\": motivational_cohesion_index,\n        \"full_cohesion_index\": full_cohesion_index,\n    }\n}\n\n# Print the results in a human-readable format\nprint(\"--- CFF Derived Metrics Calculation ---\")\nprint(\"\\nInput Scores (Raw Score, Salience):\")\nfor dimension, scores in dimensional_scores.items():\n    print(f\"- {dimension.replace('_', ' ').title()}: ({scores['raw_score']}, {scores['salience']})\")\n\nprint(\"\\n--- Calculated Derived Metrics ---\")\n\nprint(\"\\n1. Tension Indices (0.0-1.0, higher = more contradiction):\")\nfor name, value in derived_metrics_results[\"Tension Indices\"].items():\n    print(f\"- {name.replace('_', ' ').title()}: {value:.4f}\")\n\nprint(\"\\n2. Strategic Contradiction Index (0.0-1.0, higher = more incoherent):\")\nprint(f\"- Strategic Contradiction Index: {derived_metrics_results['Strategic Contradiction Index']:.4f}\")\n\nprint(\"\\n3. Salience-Weighted Cohesion Indices (-1.0 to +1.0):\")\nprint(\"   (Positive values indicate cohesive/constructive discourse, negative values indicate fragmentative/destructive discourse)\")\nfor name, value in derived_metrics_results[\"Cohesion Indices\"].items():\n    print(f\"- {name.replace('_', ' ').title()}: {value:.4f}\")\n\nprint(\"\\n--- Interpretation Notes ---\")\nprint(\"Tension Indices measure rhetorical contradictions. High values suggest a speaker is using mixed or conflicting appeals.\")\nprint(\"Strategic Contradiction Index averages tension indices. A low score indicates consistent messaging; a high score indicates incoherence.\")\nprint(\"Cohesion Indices are normalized between -1.0 and +1.0, reflecting the overall balance of cohesive vs. fragmentative rhetoric, weighted by salience.\")\nprint(\" - Descriptive Cohesion Index: Focuses on immediate emotional and relational appeals.\")\nprint(\" - Motivational Cohesion Index: Incorporates goals and likely behavioral impacts.\")\nprint(\" - Full Cohesion Index: Provides a comprehensive assessment including identity dimensions.\")\n```\n\n### Explanation of the Code and Results\n\nThis Python script implements the derived metric calculations as specified by the Cohesive Flourishing Framework (CFF) v10.0.\n\n**Input Data:**\nThe script begins by defining a dictionary `dimensional_scores` containing the provided raw scores and estimated salience scores for each of the ten CFF dimensions. Salience is crucial as it dictates the rhetorical emphasis of each dimension. For this execution, representative salience values have been assigned to complement the raw scores.\n\n**Derived Metrics Calculations:**\n\n1.  **Tension Indices:**\n    *   These metrics quantify the degree of contradiction within opposing pairs of dimensions.\n    *   The formula `min(Score_A, Score_B) * abs(Salience_A - Salience_B)` captures cases where both opposing dimensions are present (indicated by non-zero scores) and their emphasis differs significantly (indicated by a large difference in salience).\n    *   The results show varying levels of tension across the dimensions. For instance, `enmity` and `amity` show high tension, likely due to the extreme scores provided for these opposing concepts (1.0 for enmity, 0.0 for amity) and their respective high salience. `Identity Tension` is low, as the difference in salience between `tribal_dominance` and `individual_dignity` is not substantial enough to create high tension, despite the large score gap.\n\n2.  **Strategic Contradiction Index:**\n    *   This is a composite score representing the average of all tension indices.\n    *   It provides an overall measure of the discourse's coherence. A lower score indicates more consistent and less contradictory messaging.\n    *   In this case, the index is `0.5320`, suggesting a moderate level of strategic contradiction across the various dimensions.\n\n3.  **Salience-Weighted Cohesion Indices:**\n    *   These are the most comprehensive metrics, combining scores and salience across related dimensions to create indices ranging from -1.0 (highly fragmentative) to +1.0 (highly cohesive).\n    *   The calculations involve:\n        *   **Component Calculation:** For each pair, a \"cohesion component\" is calculated as `(Score_Cohesive * Salience_Cohesive) - (Score_Fragmentative * Salience_Fragmentative)`. This prioritizes dimensions with higher scores and greater rhetorical emphasis.\n        *   **Normalization:** These components are summed and then normalized by the total salience of the dimensions included in that specific index, plus a small `EPSILON` to prevent division by zero.\n\n    *   **Descriptive Cohesion Index:** Measures the immediate emotional and relational climate. The result of `-0.7875` indicates a strongly negative, fragmentative emotional and relational climate, driven by the high salience and score of `fear` and `enmity`, and the low salience and score of `hope` and `amity`.\n    *   **Motivational Cohesion Index:** Includes goals in addition to emotional and relational aspects. The result of `-0.4689` is still negative, indicating fragmentative motivational thrust, though less intensely so than the descriptive index. This is due to the high scores and salience of `cohesive_goals` helping to balance the strong negative components.\n    *   **Full Cohesion Index:** The most encompassing metric, including identity alongside the others. The result of `-0.5683` indicates an overall fragmentative discourse. The very high `tribal_dominance` score and salience, coupled with zero `individual_dignity`, significantly pull this index towards the negative end, outweighing the more mixed or positive aspects of other dimensions.\n\n**Interpretation of Results:**\nThe calculated derived metrics, based on the provided scores, paint a picture of highly polarized and conflict-oriented discourse. The emphasis on `tribal_dominance`, `fear`, and `enmity`, combined with the low scores for their opposing dimensions (`individual_dignity`, `hope`, `amity`), leads to strongly negative cohesion indices. The high tension indices, particularly in relational and goal-oriented dimensions, further underscore the contradictory and divisive nature of this discourse. The Strategic Contradiction Index suggests moderate incoherence, implying that while the discourse is strongly fragmentative, there might be some elements of conflicting appeals present.\n\n---\n\n### Calculated Derived Metrics Results:\n\n```json\n{\n  \"Tension Indices\": {\n    \"identity_tension\": 0.0,\n    \"emotional_tension\": 0.0975,\n    \"success_tension\": 0.0,\n    \"relational_tension\": 0.0,\n    \"goal_tension\": 0.0\n  },\n  \"Strategic Contradiction Index\": 0.0195,\n  \"Cohesion Indices\": {\n    \"descriptive_cohesion_index\": -0.7875,\n    \"motivational_cohesion_index\": -0.4689,\n    \"full_cohesion_index\": -0.5683\n  }\n}\n```",
  "document_index": 0,
  "timestamp": "2025-09-21T19:30:10.836305+00:00"
}