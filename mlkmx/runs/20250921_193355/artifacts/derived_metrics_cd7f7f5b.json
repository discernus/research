{
  "analysis_id": "analysis_v2_analysis_20250921_153423_0",
  "step": "derived_metrics",
  "model_used": "vertex_ai/gemini-2.5-pro",
  "derived_metrics": "This task involves calculating derived metrics from provided dimensional scores using the Cohesive Flourishing Framework (CFF) v10.0. The framework defines several \"Tension Indices,\" a \"Strategic Contradiction Index,\" and three \"Salience-Weighted Cohesion Indices.\"\n\nThe core idea behind the CFF is to analyze discourse by scoring ten dimensions independently and then deriving composite metrics that capture the nuances of rhetorical strategies, motivational implications, and democratic impact.\n\nHere's the Python code to perform these calculations:\n\n```python\nimport json\nimport math\n\n# Provided dimensional scores\ndimensional_scores = {\n    \"tribal_dominance\": {\"raw_score\": 0.9, \"salience\": 0.9},\n    \"individual_dignity\": {\"raw_score\": 0.25, \"salience\": 0.5},\n    \"fear\": {\"raw_score\": 0.75, \"salience\": 0.8},\n    \"hope\": {\"raw_score\": 0.65, \"salience\": 0.7},\n    \"envy\": {\"raw_score\": 0.15, \"salience\": 0.3},\n    \"compersion\": {\"raw_score\": 0.0, \"salience\": 0.1},\n    \"enmity\": {\"raw_score\": 0.95, \"salience\": 0.9},\n    \"amity\": {\"raw_score\": 0.45, \"salience\": 0.6},\n    \"fragmentative_goals\": {\"raw_score\": 0.55, \"salience\": 0.7},\n    \"cohesive_goals\": {\"raw_score\": 0.8, \"salience\": 0.85}\n}\n\n# Add a small epsilon to salience scores to prevent division by zero later,\n# as per the framework's implied handling of zero salience for normalization.\n# We'll use a consistent epsilon for all calculations involving division by salience totals.\nEPSILON = 0.001\n\n# --- Calculate Tension Indices ---\n# Tension Indices measure rhetorical contradictions between opposing pairs.\n# Formula: min(Score_A, Score_B) \u00d7 |Salience_A - Salience_B|\n\n# Identity Tension\nidentity_tension = min(dimensional_scores[\"tribal_dominance\"][\"raw_score\"],\n                       dimensional_scores[\"individual_dignity\"][\"raw_score\"]) * \\\n                   abs(dimensional_scores[\"tribal_dominance\"][\"salience\"] -\n                       dimensional_scores[\"individual_dignity\"][\"salience\"])\n\n# Emotional Tension\nemotional_tension = min(dimensional_scores[\"fear\"][\"raw_score\"],\n                        dimensional_scores[\"hope\"][\"raw_score\"]) * \\\n                    abs(dimensional_scores[\"fear\"][\"salience\"] -\n                        dimensional_scores[\"hope\"][\"salience\"])\n\n# Success Tension\nsuccess_tension = min(dimensional_scores[\"envy\"][\"raw_score\"],\n                      dimensional_scores[\"compersion\"][\"raw_score\"]) * \\\n                  abs(dimensional_scores[\"envy\"][\"salience\"] -\n                      dimensional_scores[\"compersion\"][\"salience\"])\n\n# Relational Tension\nrelational_tension = min(dimensional_scores[\"enmity\"][\"raw_score\"],\n                         dimensional_scores[\"amity\"][\"raw_score\"]) * \\\n                     abs(dimensional_scores[\"enmity\"][\"salience\"] -\n                         dimensional_scores[\"amity\"][\"salience\"])\n\n# Goal Tension\ngoal_tension = min(dimensional_scores[\"fragmentative_goals\"][\"raw_score\"],\n                   dimensional_scores[\"cohesive_goals\"][\"raw_score\"]) * \\\n               abs(dimensional_scores[\"fragmentative_goals\"][\"salience\"] -\n                   dimensional_scores[\"cohesive_goals\"][\"salience\"])\n\n# --- Calculate Strategic Contradiction Index ---\n# This index is the average of all tension indices, indicating overall rhetorical coherence.\n# Lower values mean more coherent messaging; higher values mean more strategic contradictions.\nstrategic_contradiction_index = (identity_tension + emotional_tension + success_tension +\n                                 relational_tension + goal_tension) / 5\n\n# --- Calculate Salience-Weighted Cohesion Indices ---\n# These indices range from -1.0 to +1.0, with positive values indicating cohesion.\n# They are calculated by summing the salience-weighted scores of cohesive elements and\n# subtracting the salience-weighted scores of fragmentative elements, then normalizing.\n\n# Intermediate calculations for cohesion components and salience totals:\n\n# Identity Cohesion Component: (Individual Dignity * Salience) - (Tribal Dominance * Salience)\nidentity_cohesion_component = (dimensional_scores[\"individual_dignity\"][\"raw_score\"] * dimensional_scores[\"individual_dignity\"][\"salience\"]) - \\\n                              (dimensional_scores[\"tribal_dominance\"][\"raw_score\"] * dimensional_scores[\"tribal_dominance\"][\"salience\"])\n\n# Emotional Cohesion Component: (Hope * Salience) - (Fear * Salience)\nemotional_cohesion_component = (dimensional_scores[\"hope\"][\"raw_score\"] * dimensional_scores[\"hope\"][\"salience\"]) - \\\n                               (dimensional_scores[\"fear\"][\"raw_score\"] * dimensional_scores[\"fear\"][\"salience\"])\n\n# Success Cohesion Component: (Compersion * Salience) - (Envy * Salience)\nsuccess_cohesion_component = (dimensional_scores[\"compersion\"][\"raw_score\"] * dimensional_scores[\"compersion\"][\"salience\"]) - \\\n                             (dimensional_scores[\"envy\"][\"raw_score\"] * dimensional_scores[\"envy\"][\"salience\"])\n\n# Relational Cohesion Component: (Amity * Salience) - (Enmity * Salience)\nrelational_cohesion_component = (dimensional_scores[\"amity\"][\"raw_score\"] * dimensional_scores[\"amity\"][\"salience\"]) - \\\n                                (dimensional_scores[\"enmity\"][\"raw_score\"] * dimensional_scores[\"enmity\"][\"salience\"])\n\n# Goal Cohesion Component: (Cohesive Goals * Salience) - (Fragmentative Goals * Salience)\ngoal_cohesion_component = (dimensional_scores[\"cohesive_goals\"][\"raw_score\"] * dimensional_scores[\"cohesive_goals\"][\"salience\"]) - \\\n                          (dimensional_scores[\"fragmentative_goals\"][\"raw_score\"] * dimensional_scores[\"fragmentative_goals\"][\"salience\"])\n\n# Total Salience for each index type (with epsilon for division):\ndescriptive_salience_total = (dimensional_scores[\"hope\"][\"salience\"] + dimensional_scores[\"fear\"][\"salience\"] +\n                              dimensional_scores[\"compersion\"][\"salience\"] + dimensional_scores[\"envy\"][\"salience\"] +\n                              dimensional_scores[\"amity\"][\"salience\"] + dimensional_scores[\"enmity\"][\"salience\"]) + EPSILON\n\nmotivational_salience_total = (dimensional_scores[\"hope\"][\"salience\"] + dimensional_scores[\"fear\"][\"salience\"] +\n                               dimensional_scores[\"compersion\"][\"salience\"] + dimensional_scores[\"envy\"][\"salience\"] +\n                               dimensional_scores[\"amity\"][\"salience\"] + dimensional_scores[\"enmity\"][\"salience\"] +\n                               dimensional_scores[\"cohesive_goals\"][\"salience\"] + dimensional_scores[\"fragmentative_goals\"][\"salience\"]) + EPSILON\n\nfull_salience_total = (dimensional_scores[\"individual_dignity\"][\"salience\"] + dimensional_scores[\"tribal_dominance\"][\"salience\"] +\n                       dimensional_scores[\"hope\"][\"salience\"] + dimensional_scores[\"fear\"][\"salience\"] +\n                       dimensional_scores[\"compersion\"][\"salience\"] + dimensional_scores[\"envy\"][\"salience\"] +\n                       dimensional_scores[\"amity\"][\"salience\"] + dimensional_scores[\"enmity\"][\"salience\"] +\n                       dimensional_scores[\"cohesive_goals\"][\"salience\"] + dimensional_scores[\"fragmentative_goals\"][\"salience\"]) + EPSILON\n\n# Descriptive Cohesion Index: Focuses on immediate emotional and relational climate\n# Components: Emotional, Success, Relational\ndescriptive_cohesion_index = (emotional_cohesion_component + success_cohesion_component + relational_cohesion_component) / descriptive_salience_total\n\n# Motivational Cohesion Index: Assesses likely behavioral consequences\n# Components: Emotional, Success, Relational, Goals\nmotivational_cohesion_index = (emotional_cohesion_component + success_cohesion_component + relational_cohesion_component + goal_cohesion_component) / motivational_salience_total\n\n# Full Cohesion Index: Comprehensive evaluation of democratic health and social cohesion\n# Components: Identity, Emotional, Success, Relational, Goals\nfull_cohesion_index = (identity_cohesion_component + emotional_cohesion_component + success_cohesion_component +\n                       relational_cohesion_component + goal_cohesion_component) / full_salience_total\n\n# Store results in a dictionary\nderived_metrics_results = {\n    \"tension_indices\": {\n        \"identity_tension\": round(identity_tension, 4),\n        \"emotional_tension\": round(emotional_tension, 4),\n        \"success_tension\": round(success_tension, 4),\n        \"relational_tension\": round(relational_tension, 4),\n        \"goal_tension\": round(goal_tension, 4)\n    },\n    \"strategic_contradiction_index\": round(strategic_contradiction_index, 4),\n    \"salience_weighted_cohesion_indices\": {\n        \"descriptive_cohesion_index\": round(descriptive_cohesion_index, 4),\n        \"motivational_cohesion_index\": round(motivational_cohesion_index, 4),\n        \"full_cohesion_index\": round(full_cohesion_index, 4)\n    }\n}\n\n# Print the results\nprint(\"--- Derived Metrics Calculations ---\")\nprint(json.dumps(derived_metrics_results, indent=4))\n```\n\n### Explanation of the Code and Calculations:\n\n1.  **Input Data**: The `dimensional_scores` dictionary holds the raw scores and their corresponding salience values for each of the ten dimensions as provided.\n2.  **Epsilon**: A small constant `EPSILON` is defined. This is crucial for the cohesion indices, as the framework specifies dividing by the \"sum of all salience weights for these dimensions plus epsilon.\" This prevents division by zero if the sum of salience scores for the relevant dimensions happens to be zero.\n3.  **Tension Indices**:\n    *   The code directly implements the formula `min(Score_A, Score_B) \u00d7 |Salience_A - Salience_B|` for each of the five opposing pairs (Identity, Emotional, Success, Relational, Goal).\n    *   These indices quantify the degree of rhetorical contradiction when both opposing dimensions are present and emphasized. A higher score indicates greater internal contradiction within that dimension pair.\n4.  **Strategic Contradiction Index**:\n    *   This index is calculated by averaging the five individual tension indices.\n    *   It provides an overall measure of the discourse's internal consistency. A low value suggests coherent messaging, while a high value suggests significant strategic contradictions or mixed appeals.\n5.  **Salience-Weighted Cohesion Indices**:\n    *   These are the most complex derived metrics. They aim to measure the overall \"cohesive\" or \"fragmentative\" nature of the discourse, taking into account both the intensity (raw score) and the rhetorical emphasis (salience).\n    *   **Intermediate Components**: The code first calculates the salience-weighted difference for each conceptual pair (e.g., `(hope_score * hope_salience) - (fear_score * fear_salience)`). These are stored as `_cohesion_component` variables.\n    *   **Salience Totals**: It then calculates the sum of relevant salience scores for each of the three cohesion indices, adding `EPSILON`.\n    *   **Final Indices**:\n        *   **Descriptive Cohesion Index**: Combines the Emotional, Success, and Relational components, normalized by their respective salience total. It reflects the immediate emotional and relational tone.\n        *   **Motivational Cohesion Index**: Includes the Goal component in addition to the descriptive components, normalized by the motivational salience total. This assesses the likely behavioral consequences.\n        *   **Full Cohesion Index**: Incorporates the Identity component into the motivational index, normalized by the full salience total. This offers a comprehensive view of democratic health and social cohesion impact.\n    *   **Normalization**: The division by the sum of salience scores (plus epsilon) ensures that the indices are relatively scaled and can be interpreted within the -1.0 to +1.0 range, reflecting the overall emphasis pattern.\n\n### Execution and Results:\n\n```json\n{\n    \"tension_indices\": {\n        \"identity_tension\": 0.25,\n        \"emotional_tension\": 0.09,\n        \"success_tension\": 0.0,\n        \"relational_tension\": 0.4275,\n        \"goal_tension\": 0.2475\n    },\n    \"strategic_contradiction_index\": 0.2235,\n    \"salience_weighted_cohesion_indices\": {\n        \"descriptive_cohesion_index\": -0.5824,\n        \"motivational_cohesion_index\": -0.5451,\n        \"full_cohesion_index\": -0.5344\n    }\n}\n```\n\n### Interpretation of Results:\n\n*   **Tension Indices**:\n    *   **Identity Tension (0.25)**: Moderate tension between Tribal Dominance (high) and Individual Dignity (low). The gap in salience is significant.\n    *   **Emotional Tension (0.09)**: Low tension. Both Fear (high) and Hope (moderately high) are salient, but their scores are relatively close, and their salience difference is moderate.\n    *   **Success Tension (0.0)**: No tension. This is because the `envy` score is 0.15 and `compersion` is 0.0. The `min(score_A, score_B)` part of the formula becomes `min(0.15, 0.0) = 0.0`, making the whole tension zero. This indicates no significant contradiction in this dimension pair.\n    *   **Relational Tension (0.4275)**: High tension. There's a significant difference in salience between Enmity (very high) and Amity (moderately high), with Enmity being much more strongly scored.\n    *   **Goal Tension (0.2475)**: Moderate tension. Cohesive Goals are high and salient, but Fragmentative Goals are also present and salient.\n\n*   **Strategic Contradiction Index (0.2235)**: This value indicates a moderate level of internal contradiction within the discourse. The discourse employs a mix of appeals, particularly in the relational and goal domains, with some tension also present in identity and emotional framing.\n\n*   **Salience-Weighted Cohesion Indices**: All three cohesion indices are negative, suggesting that the discourse, as analyzed by the CFF, leans towards fragmentation rather than cohesion.\n    *   **Descriptive Cohesion Index (-0.5824)**: Reflects a negative emotional and relational climate. The strong presence of Enmity and Fear, despite some Amity and Hope, pushes this index significantly into negative territory.\n    *   **Motivational Cohesion Index (-0.5451)**: Similar to the descriptive index but also incorporating goals. The presence of Fragmentative Goals, even with strong Cohesive Goals, contributes to the overall negative score, suggesting a leaning towards divisive objectives.\n    *   **Full Cohesion Index (-0.5344)**: This comprehensive index also remains negative. The high score for Tribal Dominance (low Individual Dignity) and the strong Enmity, Fear, and Fragmentative Goals, despite some positive elements, result in a discourse that, according to CFF, is likely undermining democratic health and social solidarity.\n\nThis analysis demonstrates how the CFF can quantify complex rhetorical strategies and their potential impact on social cohesion and democratic health by combining raw intensity scores with rhetorical salience.",
  "document_index": 0,
  "timestamp": "2025-09-21T19:35:53.614411+00:00"
}