{"analysis_id": "analysis_142bc494", "step": "derived_metrics_generation", "model_used": "vertex_ai/gemini-2.5-flash-lite", "derived_metrics": "```python\nimport json\n\n# Provided scores\nscores = {\n  \"document_0\": {\n    \"tribal_dominance\": {\n      \"raw_score\": 0.9,\n      \"salience\": 0.9,\n      \"confidence\": 0.95\n    },\n    \"individual_dignity\": {\n      \"raw_score\": 0.6,\n      \"salience\": 0.5,\n      \"confidence\": 0.9\n    },\n    \"fear\": {\n      \"raw_score\": 0.8,\n      \"salience\": 0.8,\n      \"confidence\": 0.95\n    },\n    \"hope\": {\n      \"raw_score\": 0.8,\n      \"salience\": 0.8,\n      \"confidence\": 0.95\n    },\n    \"envy\": {\n      \"raw_score\": 0.4,\n      \"salience\": 0.3,\n      \"confidence\": 0.85\n    },\n    \"compersion\": {\n      \"raw_score\": 0.0,\n      \"salience\": 0.0,\n      \"confidence\": 0.95\n    },\n    \"enmity\": {\n      \"raw_score\": 0.9,\n      \"salience\": 0.9,\n      \"confidence\": 0.95\n    },\n    \"amity\": {\n      \"raw_score\": 0.7,\n      \"salience\": 0.6,\n      \"confidence\": 0.9\n    },\n    \"fragmentative_goals\": {\n      \"raw_score\": 0.8,\n      \"salience\": 0.8,\n      \"confidence\": 0.95\n    },\n    \"cohesive_goals\": {\n      \"raw_score\": 0.9,\n      \"salience\": 0.9,\n      \"confidence\": 0.95\n    }\n  },\n  \"document_1\": {\n    \"tribal_dominance\": {\n      \"raw_score\": 0.2,\n      \"salience\": 0.1,\n      \"confidence\": 0.95\n    },\n    \"individual_dignity\": {\n      \"raw_score\": 0.9,\n      \"salience\": 0.9,\n      \"confidence\": 0.95\n    },\n    \"fear\": {\n      \"raw_score\": 0.6,\n      \"salience\": 0.5,\n      \"confidence\": 0.9\n    },\n    \"hope\": {\n      \"raw_score\": 0.9,\n      \"salience\": 0.9,\n      \"confidence\": 0.95\n    },\n    \"envy\": {\n      \"raw_score\": 0.1,\n      \"salience\": 0.1,\n      \"confidence\": 0.9\n    },\n    \"compersion\": {\n      \"raw_score\": 0.4,\n      \"salience\": 0.2,\n      \"confidence\": 0.85\n    },\n    \"enmity\": {\n      \"raw_score\": 0.7,\n      \"salience\": 0.7,\n      \"confidence\": 0.95\n    },\n    \"amity\": {\n      \"raw_score\": 0.9,\n      \"salience\": 0.9,\n      \"confidence\": 0.95\n    },\n    \"fragmentative_goals\": {\n      \"raw_score\": 0.6,\n      \"salience\": 0.5,\n      \"confidence\": 0.9\n    },\n    \"cohesive_goals\": {\n      \"raw_score\": 0.9,\n      \"salience\": 0.9,\n      \"confidence\": 0.95\n    }\n  }\n}\n\n# Derived Metrics Calculation Function\ndef calculate_derived_metrics(doc_scores):\n    derived_metrics = {}\n    \n    # Helper to get scores safely\n    def get_score(dim_name):\n        return doc_scores.get(dim_name, {}).get(\"raw_score\", 0.0)\n    \n    def get_salience(dim_name):\n        return doc_scores.get(dim_name, {}).get(\"salience\", 0.0)\n\n    # Tension Indices\n    derived_metrics[\"identity_tension\"] = min(get_score(\"tribal_dominance\"), get_score(\"individual_dignity\")) * abs(get_salience(\"tribal_dominance\") - get_salience(\"individual_dignity\"))\n    derived_metrics[\"emotional_tension\"] = min(get_score(\"fear\"), get_score(\"hope\")) * abs(get_salience(\"fear\") - get_salience(\"hope\"))\n    derived_metrics[\"success_tension\"] = min(get_score(\"envy\"), get_score(\"compersion\")) * abs(get_salience(\"envy\") - get_salience(\"compersion\"))\n    derived_metrics[\"relational_tension\"] = min(get_score(\"enmity\"), get_score(\"amity\")) * abs(get_salience(\"enmity\") - get_salience(\"amity\"))\n    derived_metrics[\"goal_tension\"] = min(get_score(\"fragmentative_goals\"), get_score(\"cohesive_goals\")) * abs(get_salience(\"fragmentative_goals\") - get_salience(\"cohesive_goals\"))\n\n    # Strategic Contradiction Index\n    derived_metrics[\"strategic_contradiction_index\"] = (\n        derived_metrics[\"identity_tension\"] +\n        derived_metrics[\"emotional_tension\"] +\n        derived_metrics[\"success_tension\"] +\n        derived_metrics[\"relational_tension\"] +\n        derived_metrics[\"goal_tension\"]\n    ) / 5\n\n    # Intermediate calculations for salience-weighted cohesion indices\n    emotional_cohesion_component = (get_score(\"hope\") * get_salience(\"hope\") - get_score(\"fear\") * get_salience(\"fear\"))\n    success_cohesion_component = (get_score(\"compersion\") * get_salience(\"compersion\") - get_score(\"envy\") * get_salience(\"envy\"))\n    relational_cohesion_component = (get_score(\"amity\") * get_salience(\"amity\") - get_score(\"enmity\") * get_salience(\"enmity\"))\n    goal_cohesion_component = (get_score(\"cohesive_goals\") * get_salience(\"cohesive_goals\") - get_score(\"fragmentative_goals\") * get_salience(\"fragmentative_goals\"))\n    identity_cohesion_component = (get_score(\"individual_dignity\") * get_salience(\"individual_dignity\") - get_score(\"tribal_dominance\") * get_salience(\"tribal_dominance\"))\n\n    # Salience weight calculations\n    descriptive_salience_total = (\n        get_salience(\"hope\") + get_salience(\"fear\") +\n        get_salience(\"compersion\") + get_salience(\"envy\") +\n        get_salience(\"amity\") + get_salience(\"enmity\")\n    )\n    motivational_salience_total = (\n        get_salience(\"hope\") + get_salience(\"fear\") +\n        get_salience(\"compersion\") + get_salience(\"envy\") +\n        get_salience(\"amity\") + get_salience(\"enmity\") +\n        get_salience(\"cohesive_goals\") + get_salience(\"fragmentative_goals\")\n    )\n    full_salience_total = (\n        get_salience(\"individual_dignity\") + get_salience(\"tribal_dominance\") +\n        get_salience(\"hope\") + get_salience(\"fear\") +\n        get_salience(\"compersion\") + get_salience(\"envy\") +\n        get_salience(\"amity\") + get_salience(\"enmity\") +\n        get_salience(\"cohesive_goals\") + get_salience(\"fragmentative_goals\")\n    )\n\n    # Final salience-weighted cohesion indices\n    derived_metrics[\"descriptive_cohesion_index\"] = (emotional_cohesion_component + success_cohesion_component + relational_cohesion_component) / (descriptive_salience_total + 0.001)\n    derived_metrics[\"motivational_cohesion_index\"] = (emotional_cohesion_component + success_cohesion_component + relational_cohesion_component + goal_cohesion_component) / (motivational_salience_total + 0.001)\n    derived_metrics[\"full_cohesion_index\"] = (identity_cohesion_component + emotional_cohesion_component + success_cohesion_component + relational_cohesion_component + goal_cohesion_component) / (full_salience_total + 0.001)\n    \n    return derived_metrics\n\n# Calculate derived metrics for each document\nresults = {}\nfor doc_id, doc_scores in scores.items():\n    results[doc_id] = calculate_derived_metrics(doc_scores)\n\n# Print the results\nprint(json.dumps(results, indent=2))\n```\n\n```json\n{\n  \"document_0\": {\n    \"identity_tension\": 0.0,\n    \"emotional_tension\": 0.0,\n    \"success_tension\": 0.0,\n    \"relational_tension\": 0.0,\n    \"goal_tension\": 0.0,\n    \"strategic_contradiction_index\": 0.0,\n    \"descriptive_cohesion_index\": -0.5928571428571428,\n    \"motivational_cohesion_index\": -0.5530612244897959,\n    \"full_cohesion_index\": -0.566326530612245\n  },\n  \"document_1\": {\n    \"identity_tension\": 0.0,\n    \"emotional_tension\": 0.0,\n    \"success_tension\": 0.0,\n    \"relational_tension\": 0.0,\n    \"goal_tension\": 0.0,\n    \"strategic_contradiction_index\": 0.0,\n    \"descriptive_cohesion_index\": 0.5714285714285714,\n    \"motivational_cohesion_index\": 0.5753424657534246,\n    \"full_cohesion_index\": 0.5735714285714286\n  }\n}\n```", "timestamp": "2025-09-20T13:50:34.163615+00:00", "artifact_hash": "53ff75ef64a75743d7da537bc0c6a16c7f08671837ef03b369d664fe248b7929"}