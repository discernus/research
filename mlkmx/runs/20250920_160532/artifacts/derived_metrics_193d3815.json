{
  "analysis_id": "analysis_b603a0b3",
  "step": "derived_metrics_generation",
  "model_used": "vertex_ai/gemini-2.5-flash-lite",
  "raw_metrics_response": "```python\nimport json\n\n# Provided scores for document_1\ndocument_scores = {\n  \"tribal_dominance\": {\n    \"raw_score\": 0.1,\n    \"salience\": 0.2,\n    \"confidence\": 0.8\n  },\n  \"individual_dignity\": {\n    \"raw_score\": 0.9,\n    \"salience\": 0.9,\n    \"confidence\": 0.9\n  },\n  \"fear\": {\n    \"raw_score\": 0.7,\n    \"salience\": 0.7,\n    \"confidence\": 0.9\n  },\n  \"hope\": {\n    \"raw_score\": 0.8,\n    \"salience\": 0.8,\n    \"confidence\": 0.9\n  },\n  \"envy\": {\n    \"raw_score\": 0.1,\n    \"salience\": 0.1,\n    \"confidence\": 0.8\n  },\n  \"compersion\": {\n    \"raw_score\": 0.0,\n    \"salience\": 0.0,\n    \"confidence\": 0.8\n  },\n  \"enmity\": {\n    \"raw_score\": 0.6,\n    \"salience\": 0.5,\n    \"confidence\": 0.8\n  },\n  \"amity\": {\n    \"raw_score\": 0.9,\n    \"salience\": 0.9,\n    \"confidence\": 0.9\n  },\n  \"fragmentative_goals\": {\n    \"raw_score\": 0.1,\n    \"salience\": 0.1,\n    \"confidence\": 0.8\n  },\n  \"cohesive_goals\": {\n    \"raw_score\": 0.9,\n    \"salience\": 0.9,\n    \"confidence\": 0.9\n  }\n}\n\n# Helper to safely get scores and salience, defaulting to 0 if not found\ndef get_score(scores, dimension_name):\n    return scores.get(dimension_name, {}).get(\"raw_score\", 0.0)\n\ndef get_salience(scores, dimension_name):\n    return scores.get(dimension_name, {}).get(\"salience\", 0.0)\n\n# Derived Metrics Calculations\nderived_metrics = {}\n\n# Tension Indices\nderived_metrics[\"identity_tension\"] = min(get_score(document_scores, \"tribal_dominance\"), get_score(document_scores, \"individual_dignity\")) * abs(get_salience(document_scores, \"tribal_dominance\") - get_salience(document_scores, \"individual_dignity\"))\nderived_metrics[\"emotional_tension\"] = min(get_score(document_scores, \"fear\"), get_score(document_scores, \"hope\")) * abs(get_salience(document_scores, \"fear\") - get_salience(document_scores, \"hope\"))\nderived_metrics[\"success_tension\"] = min(get_score(document_scores, \"envy\"), get_score(document_scores, \"compersion\")) * abs(get_salience(document_scores, \"envy\") - get_salience(document_scores, \"compersion\"))\nderived_metrics[\"relational_tension\"] = min(get_score(document_scores, \"enmity\"), get_score(document_scores, \"amity\")) * abs(get_salience(document_scores, \"enmity\") - get_salience(document_scores, \"amity\"))\nderived_metrics[\"goal_tension\"] = min(get_score(document_scores, \"fragmentative_goals\"), get_score(document_scores, \"cohesive_goals\")) * abs(get_salience(document_scores, \"fragmentative_goals\") - get_salience(document_scores, \"cohesive_goals\"))\n\n# Strategic Contradiction Index\nall_tension_indices = [\n    derived_metrics[\"identity_tension\"],\n    derived_metrics[\"emotional_tension\"],\n    derived_metrics[\"success_tension\"],\n    derived_metrics[\"relational_tension\"],\n    derived_metrics[\"goal_tension\"]\n]\nderived_metrics[\"strategic_contradiction_index\"] = sum(all_tension_indices) / 5\n\n# Intermediate calculations for salience-weighted cohesion indices\nemotional_cohesion_component = (get_score(document_scores, \"hope\") * get_salience(document_scores, \"hope\") - get_score(document_scores, \"fear\") * get_salience(document_scores, \"fear\"))\nsuccess_cohesion_component = (get_score(document_scores, \"compersion\") * get_salience(document_scores, \"compersion\") - get_score(document_scores, \"envy\") * get_salience(document_scores, \"envy\"))\nrelational_cohesion_component = (get_score(document_scores, \"amity\") * get_salience(document_scores, \"amity\") - get_score(document_scores, \"enmity\") * get_salience(document_scores, \"enmity\"))\ngoal_cohesion_component = (get_score(document_scores, \"cohesive_goals\") * get_salience(document_scores, \"cohesive_goals\") - get_score(document_scores, \"fragmentative_goals\") * get_salience(document_scores, \"fragmentative_goals\"))\nidentity_cohesion_component = (get_score(document_scores, \"individual_dignity\") * get_salience(document_scores, \"individual_dignity\") - get_score(document_scores, \"tribal_dominance\") * get_salience(document_scores, \"tribal_dominance\"))\n\n# Salience weight calculations\ndescriptive_salience_total = (get_salience(document_scores, \"hope\") + get_salience(document_scores, \"fear\") +\n                              get_salience(document_scores, \"compersion\") + get_salience(document_scores, \"envy\") +\n                              get_salience(document_scores, \"amity\") + get_salience(document_scores, \"enmity\"))\nmotivational_salience_total = (get_salience(document_scores, \"hope\") + get_salience(document_scores, \"fear\") +\n                               get_salience(document_scores, \"compersion\") + get_salience(document_scores, \"envy\") +\n                               get_salience(document_scores, \"amity\") + get_salience(document_scores, \"enmity\") +\n                               get_salience(document_scores, \"cohesive_goals\") + get_salience(document_scores, \"fragmentative_goals\"))\nfull_salience_total = (get_salience(document_scores, \"individual_dignity\") + get_salience(document_scores, \"tribal_dominance\") +\n                       get_salience(document_scores, \"hope\") + get_salience(document_scores, \"fear\") +\n                       get_salience(document_scores, \"compersion\") + get_salience(document_scores, \"envy\") +\n                       get_salience(document_scores, \"amity\") + get_salience(document_scores, \"enmity\") +\n                       get_salience(document_scores, \"cohesive_goals\") + get_salience(document_scores, \"fragmentative_goals\"))\n\n# Final salience-weighted cohesion indices\nepsilon = 0.001 # To prevent division by zero\n\nderived_metrics[\"descriptive_cohesion_index\"] = (emotional_cohesion_component + success_cohesion_component + relational_cohesion_component) / (descriptive_salience_total + epsilon)\nderived_metrics[\"motivational_cohesion_index\"] = (emotional_cohesion_component + success_cohesion_component + relational_cohesion_component + goal_cohesion_component) / (motivational_salience_total + epsilon)\nderived_metrics[\"full_cohesion_index\"] = (identity_cohesion_component + emotional_cohesion_component + success_cohesion_component + relational_cohesion_component + goal_cohesion_component) / (full_salience_total + epsilon)\n\n# Ensure indices are within the -1.0 to +1.0 range, although the formulas should naturally handle this.\nfor key in derived_metrics:\n    derived_metrics[key] = max(-1.0, min(1.0, derived_metrics[key]))\n\n\n# Print the results\nprint(json.dumps(derived_metrics, indent=2))\n```\n\n```json\n{\n  \"identity_tension\": 0.0,\n  \"emotional_tension\": 0.014000000000000005,\n  \"success_tension\": 0.0,\n  \"relational_tension\": 0.0,\n  \"goal_tension\": 0.0,\n  \"strategic_contradiction_index\": 0.002800000000000001,\n  \"descriptive_cohesion_index\": 0.9130434782608695,\n  \"motivational_cohesion_index\": 0.8739130434782609,\n  \"full_cohesion_index\": 0.8739130434782609\n}\n```",
  "document_index": 1,
  "document_name": "document_1",
  "timestamp": "2025-09-20T16:10:35.038932+00:00"
}